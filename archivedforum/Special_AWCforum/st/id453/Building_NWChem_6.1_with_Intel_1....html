<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.16.4" />
<meta name="keywords" content="Building NWChem 6.1 with Intel 11.1 and Openmpi 1.6 on a IB cluster running CentOS 6.2 Viewed 7665 times, With a total of 5 Posts" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/gumax/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/gumax/IE70Fixes.css?270" media="screen" /><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?270"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>
var skin="gumax",
stylepath="/skins",
wgUrlProtocols="http.html\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/index.php/$1",
wgScriptPath="",
wgScriptExtension=".php",
wgVariantArticlePath=false,
wgActionPaths={},
wgCanonicalNamespace="Special",
wgCanonicalSpecialPageName="AWCforum",
wgNamespaceNumber=-1,
wgPageName="Special_AWCforum",
wgTitle="AWCforum",
wgAction="view",
wgArticleId=0,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=true,
wgCurRevisionId=0,
wgVersion="1.16.4",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "NWChem", "5": "NWChem talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "500": "Release-60", "501": "Release-60 talk", "502": "Release61", "503": "Release61 talk", "504": "Release62", "505": "Release62 talk", "506": "Release64", "507": "Release64 talk", "508": "Release65", "509": "Release65 talk", "510": "Development", "511": "Development talk", "512": "Release66", "513": "Release66 talk", "121707": "Forum"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "nwchem": 4, "nwchem_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "release-60": 500, "release-60_talk": 501, "release61": 502, "release61_talk": 503, "release62": 504, "release62_talk": 505, "release64": 506, "release64_talk": 507, "release65": 508, "release65_talk": 509, "development": 510, "development_talk": 511, "release66": 512, "release66_talk": 513, "forum": 121707, "ns_reldoc64": "NS_RELDOC65", "ns_reldoc64_talk": "NS_RELDOC65_TALK", "image": 6, "image_talk": 7},
wgSiteName="NWChem",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script>
		<!-- Head Scripts -->
<style type="text/css">
#bodyContent a[href ^="http://"] {
background: none;
    padding-right: 0px;
}

#bodyContent a.external {
background: none;
	padding-right: 0px;
}

#p-cactions li a {
text-transform: capitalize;
}

#contentSub {
margin: 0;
padding: 2px;
padding-bottom: 6px;
}

pre {
margin:0px; 
    padding:5px;
    padding-bottom:20px;  
    
    width: 600px;
    overflow:auto;
    overflow-y: visible;
    line-height: 100%;
}

.top_user_links {
margin: 0;
    padding: 0;
    border-bottom: 1px solid #aaa;
    text-align: right;
}

#TopMenuLinksHolder li a:hover {

}

#TopMenuLinksHolder li a {

}

#TopMenuLinksHolder li {
margin-top: 4px;   
    margin-left: 4px;
    margin-bottom: 0px;
    
    padding: 3px;
    
    list-style: none;
    float: right;
    display: block;
    
    width: auto;
    white-space: nowrap;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    color: #000;
    text-decoration: none;
    font: 11px Verdana;
    text-align: left;
    z-index: 3;
}

#TopMenuLinksHolder a:visited {

}

#TopMenuLinksHolder div a:hover {
background: #FFF;
    color: #000;
}

#TopMenuLinksHolder div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        width: auto;
        white-space: nowrap;
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#TopMenuLinksHolder div {
position: absolute;
    visibility: hidden;
    margin: 0;
    padding: 0;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
}

#TopMenuLinksHolder {
margin: 0;
    padding: 0;
    z-index: 3;
}

.UserNameOptions {

}

#UserNameOptions a:visited {

}

#UserNameOptions li a:hover {

}

#UserNameOptions li a {
font: 11px Verdana;
}

#UserNameOptions li {
list-style: none;
    display: block;
    white-space: nowrap;
    border: 0px;
    color: #000;
    text-align: left;
    text-decoration: none;
}

#UserNameOptions div a:hover {
color: #FFF;
}

#UserNameOptions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        
        width: 500px;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#UserNameOptions div {
position: absolute;
    display: block;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    font: 12px arial;
    line-height: 100%;
}

#UserNameOptions {
margin: 0;
    padding: 0;
    z-index: 2;
}

.group_text {
font-size: 84%;
    width: auto;
    padding: 0px;
}

.edited_on {
border-top: 1px solid #aaa;
    margin: 0px;
    margin-bottom: 0px;
    padding-left: 5px;
    font-size: 12px;
}

.post_title {

}

.post_date {
border-bottom: 1px solid #aaa;
    font-size: 90%;
    padding-left: 2px;
}

.post_td {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    margin: .0em;
    padding: .0em;
}

.post_body {
padding: .5em;
    padding-top: 0px;
}

.post0 {
background-color: #E5E5E5;
    border-left: 1px solid #aaa;
    padding: .0em;
}

.post1 {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding-bottom: .0em;
}

.post_footer {
/* post, quote, edit buttons */
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.post_box {
margin-top: 5px;
    margin-left: 5px;
    margin-right: 2px;
    width: auto;
}

.mem_name {
border-bottom: 1px solid #aaa;
    margin: 0;
    padding: .4em;
}

.adv {
border: 0px;
    margin: 0em;
    padding: 0em;
}

.thread_sig {
border-top: 2px solid #aaa;
    margin: 3px;
    padding-left: 5px;
}

#subscribe_menu {
position: absolute;
    background: #ccc ;
    border: 1px solid #aaa;
    border-top: 0px;
    margin: 0em;
    padding: 5px;
    padding-top: 0px;
    top:auto;
    right:65px;
    z-index: 2;
}

.drop_down_buttons:hover {
background: #ccc ;
}

.drop_down_buttons {
margin: 0em;
    white-space: nowrap;
    border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 5px;
    color: #000;
    text-align: center;
    background: #fff ;
}

.mod_menu_row {
text-align: left;
}

.post_buttons:hover {
background: #fff ;
}

.post_buttons {
white-space: nowrap;
    float: right;
    margin-top: .5em;
    margin-right: 5px;
    border: 1px solid #aaa;
    border-bottom: 0em;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 0px;
    color: #000;
}

.quote_title {
border: 1px dashed #aaa;
	padding: 5px;
	background-color: #f9f9f9;
	font-family:"Courier New", Courier, mono;
}

.quote {
border-top: 1px solid #000;
	background-color: #fff;
	padding: 10px;
	font-size: 95%;
}

.user_options_row {
border: 1px solid #aaa;
    background: #fff ;
    padding: .3em;
}

.t_userinfo {
white-space:nowrap;
    text-align: left;
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.ThreadOtions {
margin: 0;
    padding: 0;
    text-align: right;
}

#ThreadOtions a:visited {

}

#ThreadOtions li a:hover {

}

#ThreadOtions li a {
border: 1px solid #aaa;
    border-bottom: 0em;
    padding: 4px;
}

#ThreadOtions li {
list-style: none;
    display: block;
    white-space: nowrap;
    
    border: 0px;
    color: #000;
    
    text-decoration: none;
    z-index: 3;
}

#ThreadOtions div a:hover {
background: #FFF;
    color: #000;
}

#ThreadOtions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 2px;
        border: 0em;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#ThreadOtions div {
position: absolute; 
    right: 50px;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    text-align: left;
}

#ThreadOtions {
margin-top: 3px;
    padding: 0;
    z-index: 3;
}

.forum_posts {
border: 1px solid #aaa;
    margin: 0em;
    padding: 0em;
    width: 100%;

 width: 100%;
}

.post {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding: .0em;
}

#search_box {
white-space:nowrap;
    text-align: right; 
    margin: .0em;
    padding: 0px;
}

.search_box {
float: right;
    font-size: 97%;
    margin: .0em;
    color: #000;
    background: #fff;
    border: 1px solid #000;
    margin-left: 5px;
    padding: 0px;
}

.highlightsearchword {
color: #FF0000;
}

.poll_display_table {
border: 1px solid #aaa;
    
    padding: 1px;
}

.poll_displayheader {
border-bottom: 1px dashed #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_row {
border-bottom: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 2px;
}

.poll_display_vote_total {
border-top: 1px solid #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_vote_numbers_header {
border: 1px solid #aaa;
border-bottom: 0;
}

.poll_display_vote_percent_header {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option_header {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_numbers {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_percent {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_percent_color_op10 {
background-color: #7FFF00;
}

.poll_percent_color_op1 {
background-color: #CD5555;
}

.poll_percent_color_op2 {
background-color: #5CACEE;
}

.poll_percent_color_op3 {
background-color: #FFCC11;
}

.poll_percent_color_op4 {
background-color: #668014;
}

.poll_percent_color_op5 {
background-color: #A0522D;
}

.poll_percent_color_op6 {
background-color: #9F79EE;
}

.poll_percent_color_op7 {
background-color: #EE00EE;
}

.poll_percent_color_op8 {
background-color: #DC143C;
}

.poll_percent_color_op9 {
background-color: #551011;
}

.page_jumps_top:hover {
background: #ccc ;
}

.page_jumps_top {
white-space: nowrap;
    display: inline;
    
    margin: 0px; 
    margin-right: 2px;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 4px;
    
    color: #000;
}

.page_jumps_bot:hover {
background: #ccc ;
}

.page_jumps_bot {
border: 1px solid #aaa;
    border-top: 0px;
    padding-top: 2px;
    margin-left: 2px;
    font-size: 100%;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 2px;
}

.main_memtable {
border: 1px solid #aaa;
}

.main_leftmenu {
border-right: 1px solid #aaa;
     background-color: #f9f9f9;
     width: 175px;
}

.leftmenuheaders {
border: 1px dashed #aaa;
    padding: 2px;
    font-family:"Courier New", Courier, mono;
}

.leftmenu {
background-color: #f9f9f9;
}

.right_body {
padding: 2px;
}

.mem_pm_table {
border: 1px solid #aaa;
    padding: 2px;
    margin: 7px;
}

.pm_header_new {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_title {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:85%;
}

.pm_header_sender {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_date {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_row {
background-color: #f9f9f9;
    border: 1px solid #000;
    padding: 3px;
}

#cat_list_lastaction_user {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 100%;
}

#cat_list_lastaction_date {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#cat_list_lastaction_title {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#small_desc {
font-size: 84%;
    color: #7d7d7d;
	margin-left: 10px;
    width: auto;
}

#cat_forumdisc {
font-size: 84%;
    color: #7d7d7d;
    margin-left: 10px;
    width: auto;
}

.cat_forumrows {
border: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 5px;
    font-size: 95%;
}

.thread_col_head {
border: 1px solid #aaa;
    margin: 0px;
    padding: 5px;
    white-space: nowrap;
}

.bread_crumbs {
border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 2px;
    text-align: left;
}

.dl_maintable_head {
border-right: 1px solid #aaa;
    border-bottom: 1px solid #aaa;
    background-color: #fff;
    padding: 2px;
}

.dl_maintable {
border: 1px solid #aaa;
    margin: 1px;
    padding: 1px;
}

.right_float {
float: right;
	margin-top: 8px;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.right {
float: right;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.spacer {
background-color: #aaa;
}

.whos_here_header {
border-bottom: 1px dashed #aaa;
            padding: 4px;
            font-family:"Courier New", Courier, mono;
}

.whos_here_row {
border-bottom: 1px solid #aaa;
            background-color: #f9f9f9;
            padding: 2px;
}

.whos_here {
border: 1px solid #aaa;
            border-bottom: 0;
}

.nothing {
font-size: 0%;
            margin: .0em;
            border: 0;
            margin: 0;
            padding: 0;
            width: 0;
}

.forum_stats {
border: 1px solid #aaa;
            border-bottom: 0;
}

.forum_stats_leftcol {
border-bottom: 1px solid #aaa;
                background-color: #f9f9f9;
                padding: 2px;
}

.forum_stats_rightcol {
background-color: #f9f9f9;
                border-bottom: 1px solid #aaa;
                padding: 2px;
}

.forum_stats_header {
border-bottom: 1px dashed #aaa;
                padding: 4px;
                font-family:"Courier New", Courier, mono;
}

.thread_rows0 {
background-color: #E5E5E5;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows1 {
background-color: #f3f3f3;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows {
background-color: #f9f9f9;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

#annc {
border: 1px solid #000;
	background-color: red;
	padding: 0px;
}

.sticky {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #ffa; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

.thread_lastaction {
font-size: 84%;
    text-align: right;
    white-space: nowrap;
    display: inline;
}

.pagejumps_PostOnForumPage:hover {
background: #ccc ;
}

.pagejumps_PostOnForumPage {
border: 1px solid #aaa;
    margin-left: 3px;
    font-size: 100%;
    padding-left: 3px;
    padding-right: 3px;
    padding-bottom: 0px;
}

.new_thread_button:hover {
background: #ccc ;
}

.new_thread_button {
white-space: nowrap;
    float: right;
    display: inline; /*fixes IE float bug*/
    margin-top: 0px; 
    margin-bottom: 0px; 
    margin-left: 10px;
   /* margin-left: -4px; */
    border: 1px solid #aaa;
    border-bottom: 0px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 3px;
    text-align: left; /* 2.4.1 */
    color: #000;
}

#row_info td {
border: 1px solid #aaa;
	border-top: 0px;
	background-color: #f9f9f9;
	padding: 5px;
	font-size: 95%;
}

.page_jumps_holder_thread_bot {
border-bottom: 1px solid #aaa;
}

.page_jumps_holderBot {

}

.poll_thread_listing {
border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #FFCC00;
    padding: 2px;
    font-size: 95%;
}

.locked_thread {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #e2ffe2; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

#ajax_pmname {
text-align: left;
}

#ajax_pmname ul {
list-style: none;
margin: 0;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li:hover {
background: #f9f9f9;
	margin-left: .1em;
	text-decoration: underline;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

</style>


		<!-- gumax customized style -->

					<style type="text/css">
				#gumax-content-actions li#ca-talk,
				#gumax-content-actions li#ca-history,
				#gumax-content-actions li#ca-edit,
				#gumax-personal-tools
				{ display: none; }
			</style>
		
		<!--[if lt IE 7]>
			<script type="text/javascript" src="/skins/gumax/js/ieunitpngfix-tag.js"></script>
		<![endif]-->

		<!-- end of gumax customized style -->
</head>


<body class="mediawiki ltr ns--1 ns-special page-Special_AWCforum_st_id453_Building_NWChem_6_1_with_Intel_1_html skin-gumax">

	</div>
	<!-- ///// end of gumax-header ///// -->



		<!-- gumax-content-body -->
		<div id="gumax-column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading gumax-firstHeading" >Building NWChem 6.1 with Intel 11.1 and Openmpi 1.6 on a IB cluster running CentOS 6.2</h1>
	</tr>
</table>
<br />    <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td width="65%" align="left" nowrap="nowrap"></td>                                         
            <td width="35%" class='ThreadOtions' nowrap></td>    
        </tr>
    </table>       <a name="post_1534"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_1534" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem1" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Just Got Here</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id1534.html">12:43:52 PM PDT - Tue, May 15th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Dear All,<br />
<br />
I have been trying with various degrees of (un)success to build NWChem 6.1 on a IB cluster running CentOS 6.2 (gcc 4.4.4), with distro provided IB libraries, using the intel compiler 11.1 (rev 080), MKL 10.2 (update 7) and the openmpi 1.6 built with the intel compiler and IB.<br />
<br />
I gave up (at least for now) using scalapack because I always get errors (of the undefined reference kind) and now I am only using MKL blas and lapack.<br />
<br />
Here is the script I use to build:<br />
<br />

<pre>################################################<br />
#!/bin/bash<br />
<br />
. /u/local/Modules/default/init/modules.sh<br />
module load intel openmpi/1.6<br />
module li<br />
<br />
export NWCHEM_TOP=/u/local/downloads/nwchem/nwchem-6.1<br />
export NWCHEM_TARGET=LINUX64<br />
echo "NWCHEM_TOP=$NWCHEM_TOP"<br />
echo "NWCHEM_TARGET=$NWCHEM_TARGET"<br />
<br />
export ARMCI_NETWORK=OPENIB<br />
export IB_HOME=/usr<br />
export IB_INCLUDE=/usr/include/infiniband/<br />
export IB_LIB=/usr/lib64<br />
export IB_LIB_NAME="-libumad -libverbs -lpthread"<br />
export MSG_COMMS=MPI<br />
export TCGRSH=/usr/bin/ssh<br />
echo "ARMCI_NETWORK=$ARMCI_NETWORK"<br />
echo "IB_HOME=$IB_HOME"<br />
echo "IB_INCLUDE=$IB_INCLUDE"<br />
echo "IB_LIB=$IB_LIB"<br />
echo "IB_LIB_NAME=$IB_LIB_NAME"<br />
echo "MSG_COMMS=$MSG_COMMS"<br />
echo "TCGRSH=$TCGRSH"<br />
<br />
export USE_MPI=y<br />
export USE_MPIF=y<br />
export USE_MPIF4=y<br />
export MPI_LOC=/u/local/intel/11.1/openmpi/1.6.0<br />
export MPI_LIB=$MPI_LOC/lib<br />
export MPI_INCLUDE=$MPI_LOC/include<br />
<br />
export LIBMPI="-L$MPI_LIB  -lmpi -lrdmacm -libverbs -lrt -lnsl -lutil -ldl -lm -Wl,--export-dynamic -lrt -lnsl -lutil"<br />
echo "USE_MPI=$USE_MPI"<br />
echo "USE_MPIF=$USE_MPIF"<br />
echo "USE_MPIF4=$USE_MPIF4"<br />
echo "MPI_LOC=$MPI_LOC"<br />
echo "MPI_LIB=$MPI_LIB"<br />
echo "export MPI_INCLUDE=$export MPI_INCLUDE"<br />
echo "LIBMPI=$LIBMPI"<br />
<br />
export NWCHEM_MODULES="all python"<br />
export LARGE_FILES=TRUE<br />
export USE_NOFSCHECK=TRUE<br />
export LIB_DEFINES=-DDFLT_TOT_MEM=16777216<br />
echo "NWCHEM_MODULES=$NWCHEM_MODULES"<br />
echo "LARGE_FILES=$LARGE_FILES"<br />
echo "LARGE_FILES=$LARGE_FILES"<br />
echo "LIB_DEFINES=$LIB_DEFINES"<br />
<br />
export PYTHONHOME=/usr<br />
export PYTHONVERSION=2.6<br />
export USE_PYTHON64=y<br />
export PYTHONLIBTYPE=so<br />
echo "PYTHONHOME=$PYTHONHOME"<br />
echo "PYTHONVERSION=$PYTHONVERSION"<br />
echo "USE_PYTHON64=$USE_PYTHON64"<br />
echo "PYTHONLIBTYPE=$PYTHONLIBTYPE"<br />
 <br />
# NOTE, the definition of PYTHONLIBTYPE and the change in config/makefile.h as shown below <br />
# is done to prevent the error:<br />
#<br />
#  File not found:  '/usr/lib64/python2.6/config/libpython2.6.a' <br />
#<br />
# see <a href="http://nwchemgit.github.io/Special_AWCforum/st/id349/#post_1188" class="external free">http://nwchemgit.github.io/Special_AWCforum/st/id349/#post_1188</a><br />
#<br />
sed -i 's/libpython$(PYTHONVERSION).a/libpython$(PYTHONVERSION).$(PYTHONLIBTYPE)/g' config/makefile.h<br />
<br />
export MKLLIB=/u/local/compilers/intel/11.1/080/mkl/lib/em64t<br />
<br />
export BLASOPT="$MKLLIB/libmkl_solver_ilp64_sequential.a -Wl,--start-group   $MKLLIB/libmkl_intel_ilp64.a $MKLLIB/libmkl_sequential.a $MKLLIB/libmkl_core.a -Wl,--end-group   -lpthread -lm"<br />
echo "BLASOPT=$BLASOPT"<br />
<br />
export FC="ifort -i8"<br />
export CC="icc -DMKL_ILP64"<br />
echo "FC=$FC"<br />
echo "CC=$CC"<br />
<br />
echo "### START MAKING####"<br />
<br />
#echo "make realclean" <br />
#make realclean<br />
<br />
echo "cd $NWCHEM_TOP/src"<br />
cd $NWCHEM_TOP/src<br />
pwd<br />
echo "make nwchem_config" <br />
make nwchem_config<br />
echo " "<br />
echo "########"<br />
echo " "<br />
echo "make"<br />
make <br />
################################################<br />
</pre>
<br />
And here is the error in make log file:<br />
<br />

<pre>make nwchem.o stubs.o
make[1]: warning: -jN forced in submake: disabling jobserver mode.
ifort -i8 -i8 -g  -I.  -I/u/local/downloads/nwchem/nwchem-6.1/src/include -I/u/local/downloads/nwchem/nwchem-6.1/src/tools/install/include -DEXT_INT -DLINUX -DLINUX64 -DPARAL
LEL_DIAG -DCOMPILATION_DATE=&quot;'`date +%a_%b_%d_%H:%M:%S_%Y`'&quot; -DCOMPILATION_DIR=&quot;'/u/local/downloads/nwchem/nwchem-6.1'&quot; -DNWCHEM_BRANCH=&quot;'6.1'&quot;  -c -o nwchem.o nwchem.F
ifort -i8 -i8 -g  -I.  -I/u/local/downloads/nwchem/nwchem-6.1/src/include -I/u/local/downloads/nwchem/nwchem-6.1/src/tools/install/include -DEXT_INT -DLINUX -DLINUX64 -DPARAL
LEL_DIAG -DCOMPILATION_DATE=&quot;'`date +%a_%b_%d_%H:%M:%S_%Y`'&quot; -DCOMPILATION_DIR=&quot;'/u/local/downloads/nwchem/nwchem-6.1'&quot; -DNWCHEM_BRANCH=&quot;'6.1'&quot;  -c -o stubs.o stubs.F
ifort -i8 -i8 -g  -Wl,--export-dynamic  -L/u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64 -L/u/local/downloads/nwchem/nwchem-6.1/src/tools/install/lib  -o /u/local/downloads
/nwchem/nwchem-6.1/bin/LINUX64/nwchem nwchem.o stubs.o -lnwctask -lccsd -lmcscf -lselci -lmp2 -lmoints -lstepper -ldriver -loptim -lnwdft -lgradients -lcphf -lesp -lddscf -ld
angchang -lguess -lhessian -lvib -lnwcutil -lrimp2 -lproperty -lnwints -lprepar -lnwmd -lnwpw -lofpw -lpaw -lpspw -lband -lnwpwlib -lcafe -lspace -lanalyze -lqhop -lpfft -ldp
lot -lnwpython -ldrdy -lvscf -lqmmm -lqmd -letrans -lpspw -ltce -lbq -lcons -lperfm -ldntmc -lccca -lnwcutil -lga -lpeigs -lperfm -lcons -lbq -lnwcutil /usr/lib64/python2.6/c
onfig/libpython2.6.so /u/local/compilers/intel/11.1/080/mkl/lib/em64t/libmkl_solver_ilp64_sequential.a -Wl,--start-group  /u/local/compilers/intel/11.1/080/mkl/lib/em64t/libm
kl_intel_ilp64.a /u/local/compilers/intel/11.1/080/mkl/lib/em64t/libmkl_sequential.a /u/local/compilers/intel/11.1/080/mkl/lib/em64t/libmkl_core.a -Wl,--end-group -lpthread -
lm  -llapack  -lblas   -L/u/local/intel/11.1/openmpi/1.6.0/lib -L/u/local/intel/11.1/openmpi/1.6.0/lib  -lmpi -lrdmacm -libverbs -lrt -lnsl -lutil -ldl -lm -Wl,--export-dynam
ic -lrt -lnsl -lutil  -L/usr/lib64 -libumad -libverbs -lpthread  -lnwcutil  -lpthread -lutil -ldl  
/u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwpwlib.a(Parallel-mpi.o): In function `parallel2d_finalize_':
Parallel-mpi.F:(.text+0x37): undefined reference to `mpi_comm_free_'
Parallel-mpi.F:(.text+0x47): undefined reference to `mpi_group_free_'
Parallel-mpi.F:(.text+0x57): undefined reference to `mpi_comm_free_'
Parallel-mpi.F:(.text+0x67): undefined reference to `mpi_group_free_'
/u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwpwlib.a(Parallel-mpi.o): In function `parallel3d_finalize_':
<br />
<br />
</pre>
<br />
I would gladly post the entire make.log and the tools/build/config.log and the tools/build/armci/config.log files if you could tell me how to upload files.<br />
<br />
Could you please advise?<br />
<br />
Thanks,<br />
<br />
Raffaella.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_1535"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_1535" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem2" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id1535.html">1:36:35 PM PDT - Tue, May 15th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">Need to link with library for MPI Fortran bindings<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Raffaella,<br />
Since you have defined USE_MPIF, you need to include the library for MPI Fortran bindings (e.g. for openmpi "-lmpi_f90 -lmpi_f77" and<br />
for mpich2 "-lmpichf90")<br />
<br />
I have spotted another definition in your environmental that might cause you problems.<br />
Please define FC=ifort and not FC="ifort -i8". The -i8 definition (plus more options) is automatically picked up.<br />
<br />
Ciao, Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_1536"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_1536" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem3" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Just Got Here</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id1536.html">4:50:52 PM PDT - Tue, May 15th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">ifort: error #10106<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Ciao Edo,<br />
<br />
Thanks for your reply. <br />
<br />
Yes, the MPILIB were off, I changed them to:<br />
<br />

<pre>export LIBMPI="-L$MPI_LIB -lmpi_f90 -lmpi_f77 -lmpi -ldl -Wl,--export-dynamic -lnsl -lutil"<br />
</pre>
<br />
and place the IB one in:<br />
<br />

<pre>export IB_LIB_NAME="-lrdmacm -libumad -libverbs -ldl -lpthread -lm -Wl,--export-dynamic -lrt -lnsl -lutil"<br />
</pre>
<br />
(a little redundant).<br />
<br />
However now I get a segmentation violation:<br />
<br />

<pre> Making all in md5
make[2]: warning: -jN forced in submake: disabling jobserver mode.
icc -DMKL_ILP64 -c -I.  -I/u/local/downloads/nwchem/nwchem-6.1/src/include -I/u/local/downloads/nwchem/nwchem-6.1/src/tools/install/include -DEXT_INT -DLINUX -DLINUX64 -DPARALLEL_DIAG -DCOMPILATION_DATE=&quot;'`date +%a_%b_%d_%H:%M:%S_%Y`'&quot; -DCOMPILATION_DIR=&quot;'/u/local/downloads/nwchem/nwchem-6.1'&quot; -DNWCHEM_BRANCH=&quot;'6.1'&quot; -DJOBTIMEPATH=\&quot;/u/local/downloads/nwchem/nwchem-6.1/bin/LINUX64\&quot; -DBYTE_SHORT_PACKING   -O3 -funroll-loops -ffast-math   -O0 -g -g  -o md5wrap.o md5wrap.c
icc -DMKL_ILP64 -c -I.  -I/u/local/downloads/nwchem/nwchem-6.1/src/include -I/u/local/downloads/nwchem/nwchem-6.1/src/tools/install/include -DEXT_INT -DLINUX -DLINUX64 -DPARALLEL_DIAG -DCOMPILATION_DATE=&quot;'`date +%a_%b_%d_%H:%M:%S_%Y`'&quot; -DCOMPILATION_DIR=&quot;'/u/local/downloads/nwchem/nwchem-6.1'&quot; -DNWCHEM_BRANCH=&quot;'6.1'&quot; -DJOBTIMEPATH=\&quot;/u/local/downloads/nwchem/nwchem-6.1/bin/LINUX64\&quot; -DBYTE_SHORT_PACKING   -O3 -funroll-loops -ffast-math   -O0 -g -g  -o md5.o md5.c
icc: command line warning #10006: ignoring unknown option '-ffast-math'
icc: command line warning #10120: overriding '-O3' with '-O0'
icc: command line warning #10006: ignoring unknown option '-ffast-math'
icc: command line warning #10120: overriding '-O3' with '-O0'
make[3]: warning: -jN forced in submake: disabling jobserver mode.
Got lock on /u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwcutil.lock
ar r /u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwcutil.a md5wrap.o md5.o
ranlib /u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwcutil.a
/u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwcutil.a
ifort: error #10106: Fatal error in /u/local/compilers/intel/11.1/080/bin/intel64/fortcom, terminated by segmentation violation
compilation aborted for util_version.F (code 1)
make[1]: *** [/u/local/downloads/nwchem/nwchem-6.1/lib/LINUX64/libnwcutil.a(util_version.o)] Error 1
make: *** [libraries] Error 1
<br />
</pre>
<br />
I am not sure if the problem above is related to the intel compiler. <br />
<br />
I will now remove "-i8" from the FC definition (should I also remove "-DMKL_ILP64" from CC?) and try again. I will post any outcome. <br />
<br />
Do you know of anyone who built nwchem successfully with the particular version of the intel compiler I am using (11.1.080)? I could try the 12.1 version fo the compiler.<br />
<br />
Thanks,<br />
<br />
Raffaella.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_1546"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_1546" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem4" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id1546.html">4:16:48 PM PDT - Wed, May 16th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">need to shrink util_version.F<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Raffaella,<br />
ifort 11 is fine.<br />
The problem is this the file $NWCHEM_TOP/src/uti/util_version.F. Since it's a very long file (but -- frankly speaking -- not very useful),<br />
ifort has some hiccups while processing it.<br />
<br />
Here is how to overcome the problem<br />
<br />
cd $NWCHEM_TOP/src/util<br />
head -1 util_version.F  &gt; new.F<br />
tail -1 util_version.F  &gt;&gt;new.F<br />
mv util_version.F bigv.F<br />
mv new.F util_version.F<br />
make FC=gfortran<br />
cd ..<br />
make FC=gfortran link<br />
<br />
Please let me know if this works for you, too.<br />
<br />
Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_1553"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_1553" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem5" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Just Got Here</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id1553.html">10:38:08 AM PDT - Thu, May 17th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">intel 12.1 (update 4) worked like a charm & question about possible alternative to .nwchemrc file<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Hello Edo,<br />
<br />
Thanks so much for your reply. I have not yet tried what you suggested but yesterday, after installing the latest update of the intel compiler (12.1.4), rebuilding the latest openmpi (1.6) with it, nwchem compiled as is with no problem after just the first attempt (!!!).<br />
<br />
For posterity, here is the script I used:<br />
<br />

<pre>#################################
#!/bin/bash

. /u/local/Modules/default/init/modules.sh
module load intel/12.1 openmpi/1.6
module li

export NWCHEM_TOP=/u/local/downloads/nwchem/nwchem-6.1
export NWCHEM_TARGET=LINUX64
echo &quot;NWCHEM_TOP=$NWCHEM_TOP&quot;
echo &quot;NWCHEM_TARGET=$NWCHEM_TARGET&quot;


export ARMCI_NETWORK=OPENIB
export IB_HOME=/usr
export IB_INCLUDE=/usr/include/infiniband/
export IB_LIB=/usr/lib64
#export IB_LIB_NAME=&quot;-lrdmacm -libumad -libverbs -ldl -lpthread -lm -Wl,--export-dynamic -lrt -lnsl -lutil&quot;
export IB_LIB_NAME=&quot;-lrdmacm -libverbs -lrt -lnsl -lutil -ldl -lm -Wl,--export-dynamic -lrt -lnsl -lutil&quot;
export MSG_COMMS=MPI
export TCGRSH=/usr/bin/ssh
echo &quot;ARMCI_NETWORK=$ARMCI_NETWORK&quot;
echo &quot;IB_HOME=$IB_HOME&quot;
echo &quot;IB_INCLUDE=$IB_INCLUDE&quot;
echo &quot;IB_LIB=$IB_LIB&quot;
echo &quot;IB_LIB_NAME=$IB_LIB_NAME&quot;
echo &quot;MSG_COMMS=$MSG_COMMS&quot;
echo &quot;TCGRSH=$TCGRSH&quot;

export USE_MPI=y
export USE_MPIF=y
export USE_MPIF4=y
export MPI_LOC=/u/local/intel/12.1/openmpi/1.6.0
export MPI_LIB=$MPI_LOC/lib
export MPI_INCLUDE=$MPI_LOC/include
export LIBMPI=&quot;-lpthread -L$MPI_LIB -lmpi_f90 -lmpi_f77 -lmpi&quot;
echo &quot;USE_MPI=$USE_MPI&quot;
echo &quot;USE_MPIF=$USE_MPIF&quot;
echo &quot;USE_MPIF4=$USE_MPIF4&quot;
echo &quot;MPI_LOC=$MPI_LOC&quot;
echo &quot;MPI_LIB=$MPI_LIB&quot;
echo &quot;export MPI_INCLUDE=$export MPI_INCLUDE&quot;
echo &quot;LIBMPI=$LIBMPI&quot;

export NWCHEM_MODULES=&quot;all python&quot;
export LARGE_FILES=TRUE
export USE_NOFSCHECK=TRUE
export LIB_DEFINES=-DDFLT_TOT_MEM=16777216
echo &quot;NWCHEM_MODULES=$NWCHEM_MODULES&quot;
echo &quot;LARGE_FILES=$LARGE_FILES&quot;
echo &quot;LARGE_FILES=$LARGE_FILES&quot;
echo &quot;LIB_DEFINES=$LIB_DEFINES&quot;

export PYTHONHOME=/usr
export PYTHONVERSION=2.6
export USE_PYTHON64=y
export PYTHONLIBTYPE=so
echo &quot;PYTHONHOME=$PYTHONHOME&quot;
echo &quot;PYTHONVERSION=$PYTHONVERSION&quot;
echo &quot;USE_PYTHON64=$USE_PYTHON64&quot;
echo &quot;PYTHONLIBTYPE=$PYTHONLIBTYPE&quot;


# NOTE, the definition of PYTHONLIBTYPE and the change in config/makefile.h as shown below
# is done to prevent the error:
#
#  File not found:  '/usr/lib64/python2.6/config/libpython2.6.a' 
#
# see http://nwchemgit.github.io/Special_AWCforum/st/id349/#post_1188
#
#sed -i 's/libpython$(PYTHONVERSION).a/libpython$(PYTHONVERSION).$(PYTHONLIBTYPE)/g' config/makefile.h
export MKLROOT=/u/local/compilers/intel/12.1/4/composer_xe_2011_sp1.10.319/mkl
export BLASOPT=&quot;-Wl,--start-group  $MKLROOT/lib/intel64/libmkl_intel_ilp64.a $MKLROOT/lib/intel64/libmkl_sequential.a $MKLROOT/lib/intel64/libmkl_core.a -Wl,--end-group -lpthread -lm&quot;
echo &quot;BLASOPT=$BLASOPT&quot;

export FC=/u/local/compilers/intel/12.1/4/composer_xe_2011_sp1.10.319/bin/intel64/ifort
export CC=/u/local/compilers/intel/12.1/4/composer_xe_2011_sp1.10.319/bin/intel64/icc
echo &quot;FC=$FC&quot;
echo &quot;CC=$CC&quot;

echo &quot;### START MAKING####&quot;

#echo &quot;make realclean&quot;
#make realclean

echo &quot;cd $NWCHEM_TOP/src&quot;
cd $NWCHEM_TOP/src
pwd
echo &quot;make nwchem_config&quot;
make nwchem_config
echo &quot; &quot;
echo &quot;########&quot;
echo &quot; &quot;
echo &quot;make FC=$FC CC=$CC&quot;
make FC=$FC CC=$CC
#################################<br />
</pre>
<br />
Can I ask you whether instead of creating a .nwchemrc file in the users's $HOME would be OK to define environmental variables for: nwchem_basis_library, nwchem_nwpw_library, ffield, amber_1, amber_2, amber_3, amber_4, spce, charmm_s, charmm_x?<br />
<br />
Also, do you think that not having used scalapack will greatly impact the performance of nwchem?<br />
<br />
<br />
Raffaella.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2244"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2244" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem6" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Just Got Here</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="55">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2244.html">10:35:29 PM PDT - Sun, Oct 28th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="45" colspan="2">Thanks,<br />
<br />
I had this problem with the Intel Compiler 12.1 and your suggestion to cut down the size of util_version.F worked.<br />
<br />
I didn't even have to use gfortran.<br />
<br />
Andy<br />
<br />
<div class='quote_title'>Quote:Edoapra <a target='blank' href="../../sp/id1546.html" title="Special_AWCforum/sp/id1546">May 16th 4:16 pm</a><div class='quote'>Raffaella,<br />
ifort 11 is fine.<br />
The problem is this the file $NWCHEM_TOP/src/uti/util_version.F. Since it's a very long file (but -- frankly speaking -- not very useful),<br />
ifort has some hiccups while processing it.<br />
<br />
Here is how to overcome the problem<br />
<br />
cd $NWCHEM_TOP/src/util<br />
head -1 util_version.F  &gt; new.F<br />
tail -1 util_version.F  &gt;&gt;new.F<br />
mv util_version.F bigv.F<br />
mv new.F util_version.F<br />
make FC=gfortran<br />
cd ..<br />
make FC=gfortran link<br />
<br />
Please let me know if this works for you, too.<br />
<br />
Edo</div id="quote"></div id="quote">
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0" class="bot_breadcrumbs_and_pagejump">
	<tr>
		<td width="100%" class="bot_breadcrumbs"><a href="../../index.html">Forum</a> &gt;&gt; <a href="../../sc/id2.html">NWChem's corner</a> &gt;&gt; <a href="../../sf/id4.html">Compiling NWChem</a></td>
	</tr>
	<tr>
		<td width="100%" class="bot_pagejumps"></td>
	</tr>
</table>
<br /><br />      <br />
</body> 
</html> 
