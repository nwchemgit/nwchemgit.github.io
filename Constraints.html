<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://nwchemgit.github.io/Constraints.html">
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Constraints - NWChem</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Constraints";
    var mkdocs_page_input_path = "Constraints.md";
    var mkdocs_page_url = "/Constraints.html";
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> NWChem</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Home.html">User Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Download.html">How to download NWChem</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Quantum-Mechanical-Methods.html">Quantum Mechanical Methods</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Quantum-Molecular-Dynamics.html">Quantum Molecular Dynamics</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Other-Capabilities.html">Other Capabilities</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Supplementary-Information.html">Supplementary Information</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Compiling-NWChem.html">How to install NWChem</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Benchmarks.html">Benchmarks performed with NWChem</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Known-Bugs.html">Known Bugs</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Tutorials.html">Tutorials</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Forum.html">Forum</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="Archived-Forum.html">Archived Forum</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="EMSL_Arrows.html">EMSL Arrows</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">NWChem</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Constraints</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/nwchemgit/nwchem-wiki/blob/master/Constraints.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="constraints">Constraints<a class="headerlink" href="#constraints" title="Permanent link">&para;</a></h1>
<p>The constraints directive allows the user to specify which constraints
should be imposed on the system during the analysis of potential energy
surface. Currently such constraints are limited to fixed atom positions
and harmonic restraints (springs) on the distance between the two atoms.
The general form of constraints block is presented
below:</p>
<pre><code>CONSTRAINTS [string name ] \  
          [clear] \  
          [enable||disable] \  
          [fix atom &lt;integer list&gt;] \  
          [spring bond &lt;integer atom1&gt; &lt;integer atom2&gt; &lt;real k&gt; &lt;real r0&gt; ]  
          [spring dihedral &lt;integer atom1&gt; &lt;integer atom2&gt; &lt;integer atom3&gt; &lt;integer atom4&gt; &lt;real k&gt; &lt;real phi0 in degrees&gt; ] 
          [spring bondings &lt;real K0&gt; &lt;real gamma0&gt; [&lt;real ca&gt; &lt;integer atom1a&gt; &lt;integer atom2a&gt; 
                                             &lt;real cb&gt; &lt;integer atom1b&gt; &lt;integer atom2b&gt;
                                             ...]]
          [penalty pbondings &lt;real K0&gt; &lt;real gcut0&gt; &lt;real gamma0&gt; [&lt;real ca&gt; &lt;integer atom1a&gt; &lt;integer atom2a&gt; 
                                                           &lt;real cb&gt; &lt;integer atom1b&gt; &lt;integer atom2b&gt;
                                                           ...]]
 END
</code></pre>

<p>The keywords are described below</p>
<ul>
<li>name - optional keyword that associates a name with a given set of
    constraints. Any unnamed set of constraints will be given a name
    <em>default</em> and will be automatically loaded prior to a calculation.
    Any constraints with the name other than <em>default</em> will have to be
    loaded manually using SET directive. For example,</li>
</ul>
<pre><code> CONSTRAINTS one  
   spring bond 1 3 5.0 1.3
   fix atom 1  
 END 
  
 #the above constraints can be loaded using the set directive`  
 set constraints one  
 ....  
 task ....
</code></pre>

<ul>
<li>clear - destroys any prior constraint information. This may be
    useful when the same constraints have to be redefined or completely
    removed from the runtime database.</li>
</ul>
<!-- end list -->

<ul>
<li>enable||disable - enables or disables particular set of constraints
    without actually removing the information from the runtime database.</li>
</ul>
<!-- end list -->

<ul>
<li>fix atom - fixes atom positions during geometry optimization. This
    directive requires an integer list that specifies which atoms are to
    be fixed. This directive can be repeated within a given constraints
    block. To illustrate the use &ldquo;fix atom&rdquo; directive let us consider a
    situation where we would like to fix atoms 1, 3, 4, 5, 6 while
    performing an optimization on some hypothetical system. There are
    actually several ways to enter this particular constraint.</li>
</ul>
<!-- end list -->

<ul>
<li>There is a straightforward option which requires the most
        typing:</li>
</ul>
<pre><code>       constraints  
         fix atom 1 3 4 5 6 
       end
</code></pre>

<ul>
<li>Second method uses list input:</li>
</ul>
<pre><code>       constraints  
         fix atom 1 3:6  
       end
</code></pre>

<ul>
<li>Third approach illustrates the use of multiple fix atom
        directives:</li>
</ul>
<pre><code>       constraints 
         fix atom 1 
         fix atom 3:6 
       end
</code></pre>

<ul>
<li>spring bond <img alt="$&lt;i j k r_0&gt;$" src="https://raw.githubusercontent.com/wiki/nwchemgit/nwchem/svgs/424902055502ece4201b8adbfaa6ef95.svg?invert_in_darkmode&sanitize=true" align=middle width="71.741175pt" height="22.74591pt"/> - places a spring with a spring constant
    <em>k</em> and equilibrium length <img alt="$r_0$" src="https://raw.githubusercontent.com/wiki/nwchemgit/nwchem/svgs/1db75c795ab2c794f72bbe79b8113be1.svg?invert_in_darkmode&sanitize=true" align=middle width="13.91676pt" height="14.10255pt"/> between atoms <em>i</em> and <em>j</em> (all in
    atomic units). Please note that this type of constraint adds an
    additional term to the total energy expression</li>
</ul>
<p><img alt="$E=E_{total}+ \,\!\frac{1}{2} k(r_{ij}-r_0)^2$" src="https://raw.githubusercontent.com/wiki/nwchemgit/nwchem/svgs/2f6a0c2ad3fa444503a3d7e314f3f89f.svg?invert_in_darkmode&sanitize=true" align=middle width="188.214345pt" height="27.72033pt"/></p>
<p>This additional term forces the distance between atoms <em>i</em> and <em>j</em> to be
in the vicinity of <img alt="$r_0$" src="https://raw.githubusercontent.com/wiki/nwchemgit/nwchem/svgs/1db75c795ab2c794f72bbe79b8113be1.svg?invert_in_darkmode&sanitize=true" align=middle width="13.91676pt" height="14.10255pt"/> but never exactly that. In general the spring
energy term will always have some nonzero residual value, and this has
to be accounted for when comparing total energies. The &ldquo;spring bond&rdquo;
directive can be repeated within a given constraints block. If the
spring between the same pair of atoms is defined more than once, it will
be replaced by the latest specification in the order it appears in the
input block.</p>
<ul>
<li>
<p>spring dihedral places a spring with....</p>
</li>
<li>
<p>spring bondings places a spring with....</p>
</li>
<li>
<p>penalty pbondings places a penalty function with....</p>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/nwchemgit/nwchem-wiki/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
