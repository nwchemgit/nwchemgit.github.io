<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from /index.php/Special:AWCforum/st/id834/#post_3106 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Jun 2020 03:21:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.16.4" />
<meta name="keywords" content="Solved: Nwchem 6.3 running 2-5 times slower than 6.1.1 Viewed 20266 times, With a total of 11 Posts" />
<link rel="shortcut icon" href="../../../../favicon.html" />
<link rel="search" type="application/opensearchdescription+xml" href="../../../../opensearch_desc.php" title="NWChem (en)" />
<link rel="alternate" type="application/atom+xml" title="NWChem Atom feed" href="../../../../index890f.php?title=Special:RecentChanges&amp;feed=atom" />		<title>Solved: Nwchem 6.3 running 2-5 times slower than 6.1.1 - NWChem</title>
		<link rel="stylesheet" href="../../../../skins/common/shared3905.css?270" media="screen" />
<link rel="stylesheet" href="../../../../skins/common/commonPrint3905.css?270" media="print" />
<link rel="stylesheet" href="../../../../skins/gumax/gumax_main3905.css?270" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/gumax/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/gumax/IE70Fixes.css?270" media="screen" /><![endif]-->
<link rel="stylesheet" href="../../../../skins/gumax/gumax_print3905.css?270" media="print" />
<link rel="stylesheet" href="../../../../index31a6.css?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="../../../../index663f.css?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" media="print" />
<link rel="stylesheet" href="../../../../indexb76e.css?title=MediaWiki:Gumax.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="../../../../indexd70f.css?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?270"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>
var skin="gumax",
stylepath="/skins",
wgUrlProtocols="http.html\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/index.php/$1",
wgScriptPath="",
wgScriptExtension=".php",
wgScript="../../../Main_Page.html",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="../../../../index.html",
wgCanonicalNamespace="Special",
wgCanonicalSpecialPageName="AWCforum",
wgNamespaceNumber=-1,
wgPageName="Special:AWCforum",
wgTitle="AWCforum",
wgAction="view",
wgArticleId=0,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=true,
wgCurRevisionId=0,
wgVersion="1.16.4",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "NWChem", "5": "NWChem talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "500": "Release-60", "501": "Release-60 talk", "502": "Release61", "503": "Release61 talk", "504": "Release62", "505": "Release62 talk", "506": "Release64", "507": "Release64 talk", "508": "Release65", "509": "Release65 talk", "510": "Development", "511": "Development talk", "512": "Release66", "513": "Release66 talk", "121707": "Forum"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "nwchem": 4, "nwchem_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "release-60": 500, "release-60_talk": 501, "release61": 502, "release61_talk": 503, "release62": 504, "release62_talk": 505, "release64": 506, "release64_talk": 507, "release65": 508, "release65_talk": 509, "development": 510, "development_talk": 511, "release66": 512, "release66_talk": 513, "forum": 121707, "ns_reldoc64": "NS_RELDOC65", "ns_reldoc64_talk": "NS_RELDOC65_TALK", "image": 6, "image_talk": 7},
wgSiteName="NWChem",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script>
		<script type="text/javascript" src="../../../../skins/common/wikibits3905.js?270"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<style type="text/css">
#bodyContent a[href ^="http://"] {
background: none;
    padding-right: 0px;
}

#bodyContent a.external {
background: none;
	padding-right: 0px;
}

#p-cactions li a {
text-transform: capitalize;
}

#contentSub {
margin: 0;
padding: 2px;
padding-bottom: 6px;
}

pre {
margin:0px; 
    padding:5px;
    padding-bottom:20px;  
    
    width: 600px;
    overflow:auto;
    overflow-y: visible;
    line-height: 100%;
}

.top_user_links {
margin: 0;
    padding: 0;
    border-bottom: 1px solid #aaa;
    text-align: right;
}

#TopMenuLinksHolder li a:hover {

}

#TopMenuLinksHolder li a {

}

#TopMenuLinksHolder li {
margin-top: 4px;   
    margin-left: 4px;
    margin-bottom: 0px;
    
    padding: 3px;
    
    list-style: none;
    float: right;
    display: block;
    
    width: auto;
    white-space: nowrap;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    color: #000;
    text-decoration: none;
    font: 11px Verdana;
    text-align: left;
    z-index: 3;
}

#TopMenuLinksHolder a:visited {

}

#TopMenuLinksHolder div a:hover {
background: #FFF;
    color: #000;
}

#TopMenuLinksHolder div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        width: auto;
        white-space: nowrap;
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#TopMenuLinksHolder div {
position: absolute;
    visibility: hidden;
    margin: 0;
    padding: 0;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
}

#TopMenuLinksHolder {
margin: 0;
    padding: 0;
    z-index: 3;
}

.UserNameOptions {

}

#UserNameOptions a:visited {

}

#UserNameOptions li a:hover {

}

#UserNameOptions li a {
font: 11px Verdana;
}

#UserNameOptions li {
list-style: none;
    display: block;
    white-space: nowrap;
    border: 0px;
    color: #000;
    text-align: left;
    text-decoration: none;
}

#UserNameOptions div a:hover {
color: #FFF;
}

#UserNameOptions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        
        width: 500px;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#UserNameOptions div {
position: absolute;
    display: block;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    font: 12px arial;
    line-height: 100%;
}

#UserNameOptions {
margin: 0;
    padding: 0;
    z-index: 2;
}

.group_text {
font-size: 84%;
    width: auto;
    padding: 0px;
}

.edited_on {
border-top: 1px solid #aaa;
    margin: 0px;
    margin-bottom: 0px;
    padding-left: 5px;
    font-size: 12px;
}

.post_title {

}

.post_date {
border-bottom: 1px solid #aaa;
    font-size: 90%;
    padding-left: 2px;
}

.post_td {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    margin: .0em;
    padding: .0em;
}

.post_body {
padding: .5em;
    padding-top: 0px;
}

.post0 {
background-color: #E5E5E5;
    border-left: 1px solid #aaa;
    padding: .0em;
}

.post1 {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding-bottom: .0em;
}

.post_footer {
/* post, quote, edit buttons */
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.post_box {
margin-top: 5px;
    margin-left: 5px;
    margin-right: 2px;
    width: auto;
}

.mem_name {
border-bottom: 1px solid #aaa;
    margin: 0;
    padding: .4em;
}

.adv {
border: 0px;
    margin: 0em;
    padding: 0em;
}

.thread_sig {
border-top: 2px solid #aaa;
    margin: 3px;
    padding-left: 5px;
}

#subscribe_menu {
position: absolute;
    background: #ccc ;
    border: 1px solid #aaa;
    border-top: 0px;
    margin: 0em;
    padding: 5px;
    padding-top: 0px;
    top:auto;
    right:65px;
    z-index: 2;
}

.drop_down_buttons:hover {
background: #ccc ;
}

.drop_down_buttons {
margin: 0em;
    white-space: nowrap;
    border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 5px;
    color: #000;
    text-align: center;
    background: #fff ;
}

.mod_menu_row {
text-align: left;
}

.post_buttons:hover {
background: #fff ;
}

.post_buttons {
white-space: nowrap;
    float: right;
    margin-top: .5em;
    margin-right: 5px;
    border: 1px solid #aaa;
    border-bottom: 0em;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 0px;
    color: #000;
}

.quote_title {
border: 1px dashed #aaa;
	padding: 5px;
	background-color: #f9f9f9;
	font-family:"Courier New", Courier, mono;
}

.quote {
border-top: 1px solid #000;
	background-color: #fff;
	padding: 10px;
	font-size: 95%;
}

.user_options_row {
border: 1px solid #aaa;
    background: #fff ;
    padding: .3em;
}

.t_userinfo {
white-space:nowrap;
    text-align: left;
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.ThreadOtions {
margin: 0;
    padding: 0;
    text-align: right;
}

#ThreadOtions a:visited {

}

#ThreadOtions li a:hover {

}

#ThreadOtions li a {
border: 1px solid #aaa;
    border-bottom: 0em;
    padding: 4px;
}

#ThreadOtions li {
list-style: none;
    display: block;
    white-space: nowrap;
    
    border: 0px;
    color: #000;
    
    text-decoration: none;
    z-index: 3;
}

#ThreadOtions div a:hover {
background: #FFF;
    color: #000;
}

#ThreadOtions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 2px;
        border: 0em;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#ThreadOtions div {
position: absolute; 
    right: 50px;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    text-align: left;
}

#ThreadOtions {
margin-top: 3px;
    padding: 0;
    z-index: 3;
}

.forum_posts {
border: 1px solid #aaa;
    margin: 0em;
    padding: 0em;
    width: 100%;

 width: 100%;
}

.post {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding: .0em;
}

#search_box {
white-space:nowrap;
    text-align: right; 
    margin: .0em;
    padding: 0px;
}

.search_box {
float: right;
    font-size: 97%;
    margin: .0em;
    color: #000;
    background: #fff;
    border: 1px solid #000;
    margin-left: 5px;
    padding: 0px;
}

.highlightsearchword {
color: #FF0000;
}

.poll_display_table {
border: 1px solid #aaa;
    
    padding: 1px;
}

.poll_displayheader {
border-bottom: 1px dashed #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_row {
border-bottom: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 2px;
}

.poll_display_vote_total {
border-top: 1px solid #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_vote_numbers_header {
border: 1px solid #aaa;
border-bottom: 0;
}

.poll_display_vote_percent_header {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option_header {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_numbers {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_percent {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_percent_color_op10 {
background-color: #7FFF00;
}

.poll_percent_color_op1 {
background-color: #CD5555;
}

.poll_percent_color_op2 {
background-color: #5CACEE;
}

.poll_percent_color_op3 {
background-color: #FFCC11;
}

.poll_percent_color_op4 {
background-color: #668014;
}

.poll_percent_color_op5 {
background-color: #A0522D;
}

.poll_percent_color_op6 {
background-color: #9F79EE;
}

.poll_percent_color_op7 {
background-color: #EE00EE;
}

.poll_percent_color_op8 {
background-color: #DC143C;
}

.poll_percent_color_op9 {
background-color: #551011;
}

.page_jumps_top:hover {
background: #ccc ;
}

.page_jumps_top {
white-space: nowrap;
    display: inline;
    
    margin: 0px; 
    margin-right: 2px;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 4px;
    
    color: #000;
}

.page_jumps_bot:hover {
background: #ccc ;
}

.page_jumps_bot {
border: 1px solid #aaa;
    border-top: 0px;
    padding-top: 2px;
    margin-left: 2px;
    font-size: 100%;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 2px;
}

.main_memtable {
border: 1px solid #aaa;
}

.main_leftmenu {
border-right: 1px solid #aaa;
     background-color: #f9f9f9;
     width: 175px;
}

.leftmenuheaders {
border: 1px dashed #aaa;
    padding: 2px;
    font-family:"Courier New", Courier, mono;
}

.leftmenu {
background-color: #f9f9f9;
}

.right_body {
padding: 2px;
}

.mem_pm_table {
border: 1px solid #aaa;
    padding: 2px;
    margin: 7px;
}

.pm_header_new {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_title {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:85%;
}

.pm_header_sender {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_date {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_row {
background-color: #f9f9f9;
    border: 1px solid #000;
    padding: 3px;
}

#cat_list_lastaction_user {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 100%;
}

#cat_list_lastaction_date {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#cat_list_lastaction_title {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#small_desc {
font-size: 84%;
    color: #7d7d7d;
	margin-left: 10px;
    width: auto;
}

#cat_forumdisc {
font-size: 84%;
    color: #7d7d7d;
    margin-left: 10px;
    width: auto;
}

.cat_forumrows {
border: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 5px;
    font-size: 95%;
}

.thread_col_head {
border: 1px solid #aaa;
    margin: 0px;
    padding: 5px;
    white-space: nowrap;
}

.bread_crumbs {
border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 2px;
    text-align: left;
}

.dl_maintable_head {
border-right: 1px solid #aaa;
    border-bottom: 1px solid #aaa;
    background-color: #fff;
    padding: 2px;
}

.dl_maintable {
border: 1px solid #aaa;
    margin: 1px;
    padding: 1px;
}

.right_float {
float: right;
	margin-top: 8px;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.right {
float: right;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.spacer {
background-color: #aaa;
}

.whos_here_header {
border-bottom: 1px dashed #aaa;
            padding: 4px;
            font-family:"Courier New", Courier, mono;
}

.whos_here_row {
border-bottom: 1px solid #aaa;
            background-color: #f9f9f9;
            padding: 2px;
}

.whos_here {
border: 1px solid #aaa;
            border-bottom: 0;
}

.nothing {
font-size: 0%;
            margin: .0em;
            border: 0;
            margin: 0;
            padding: 0;
            width: 0;
}

.forum_stats {
border: 1px solid #aaa;
            border-bottom: 0;
}

.forum_stats_leftcol {
border-bottom: 1px solid #aaa;
                background-color: #f9f9f9;
                padding: 2px;
}

.forum_stats_rightcol {
background-color: #f9f9f9;
                border-bottom: 1px solid #aaa;
                padding: 2px;
}

.forum_stats_header {
border-bottom: 1px dashed #aaa;
                padding: 4px;
                font-family:"Courier New", Courier, mono;
}

.thread_rows0 {
background-color: #E5E5E5;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows1 {
background-color: #f3f3f3;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows {
background-color: #f9f9f9;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

#annc {
border: 1px solid #000;
	background-color: red;
	padding: 0px;
}

.sticky {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #ffa; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

.thread_lastaction {
font-size: 84%;
    text-align: right;
    white-space: nowrap;
    display: inline;
}

.pagejumps_PostOnForumPage:hover {
background: #ccc ;
}

.pagejumps_PostOnForumPage {
border: 1px solid #aaa;
    margin-left: 3px;
    font-size: 100%;
    padding-left: 3px;
    padding-right: 3px;
    padding-bottom: 0px;
}

.new_thread_button:hover {
background: #ccc ;
}

.new_thread_button {
white-space: nowrap;
    float: right;
    display: inline; /*fixes IE float bug*/
    margin-top: 0px; 
    margin-bottom: 0px; 
    margin-left: 10px;
   /* margin-left: -4px; */
    border: 1px solid #aaa;
    border-bottom: 0px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 3px;
    text-align: left; /* 2.4.1 */
    color: #000;
}

#row_info td {
border: 1px solid #aaa;
	border-top: 0px;
	background-color: #f9f9f9;
	padding: 5px;
	font-size: 95%;
}

.page_jumps_holder_thread_bot {
border-bottom: 1px solid #aaa;
}

.page_jumps_holderBot {

}

.poll_thread_listing {
border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #FFCC00;
    padding: 2px;
    font-size: 95%;
}

.locked_thread {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #e2ffe2; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

#ajax_pmname {
text-align: left;
}

#ajax_pmname ul {
list-style: none;
margin: 0;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li:hover {
background: #f9f9f9;
	margin-left: .1em;
	text-decoration: underline;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

</style>
<script type="text/javascript" src="../../../../extensions/awc/forums/awc.js"></script><script src="../../../../skins/common/ajax3905.js?270"></script>
		<script type="text/javascript" src="../../../../indexb492.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=gumax"><!-- site js --></script>


		<!-- gumax customized style -->

					<style type="text/css">
				#gumax-content-actions li#ca-talk,
				#gumax-content-actions li#ca-history,
				#gumax-content-actions li#ca-edit,
				#gumax-personal-tools
				{ display: none; }
			</style>
		
		<!--[if lt IE 7]>
			<script type="text/javascript" src="/skins/gumax/js/ieunitpngfix-tag.js"></script>
		<![endif]-->

		<!-- end of gumax customized style -->
</head>


<body class="mediawiki ltr ns--1 ns-special page-Special_AWCforum_st_id834 skin-gumax">

<!-- ##### gumax-wrapper ##### -->
<div id="gumax-wrapper">

<table border="0" id="gumax-page-table"><tr><td id="gumax-page-table-left"><img src="../../../../skins/gumax/blank.gif" alt="" /></td><td width="100%" valign="top" style="padding: 0; margin: 0" id="gumax-page-table-content">


<!-- ===== gumax-page ===== -->
<div class="gumax-page">

	<!-- ///// gumax-header ///// -->
	<div id="gumax-header">
		<a name="top" id="contentTop"></a>

		<!-- gumax-p-logo -->
	<div id="gumax-p-logo">
		<div id="p-logo">
			<a style="background-image: url(../../../../images/MS3_NWChem.logo3.png);" href="../../../Main_Page.html" title="Main Page"></a>
		</div>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<!-- end of gumax-p-logo -->

		<!-- Login -->
	<div id="gumax-p-login">
		<ul>
		</ul>
	</div>
	<!-- end of Login -->

		<!-- Search -->
	<div id="gumax-p-search" class="gumax-portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="gumax-searchBody" class="gumax-pBody">
			<form action="http:///index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton" value="Go" title="Go to a page with this exact name if exists" />
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<!-- end of Search -->

	</div>
	<!-- ///// end of gumax-header ///// -->


		<!-- Navigation Menu -->
	<div id="gumax-p-navigation">
			<div class="gumax-portlet gumax-p-navigation">
				<h5>Navigation</h5>
						<ul>
								<li id="n-Home"><a href="../../../Main_Page.html">Home</a></li>
								<li id="n-Science"><a href="../../../Science.html">Science</a></li>
								<li id="n-Benchmarks"><a href="../../../Benchmarks.html">Benchmarks</a></li>
								<li id="n-Download.C2.A0"><a href="../../../Download.html">Download </a></li>
								<li id="n-Documentation"><a href="../../../Release66_NWChem_Documentation.html">Documentation</a></li>
								<li id="n-Projects"><a href="../../../Ongoing_Projects.html">Projects</a></li>
								<li id="n-News"><a href="../../../NWChem_Current_events.html">News</a></li>
								<li id="n-Forum"><a href="../../../Special_AWCforum.html">Forum</a></li>
								<li id="n-FAQ"><a href="../../../FAQ.html">FAQ</a></li>
								<li id="n-Other-Software"><a href="../../../Software_supporting_NWChem.html">Other Software</a></li>
								<li id="n-Development"><a href="../../../Developer.html">Development</a></li>
						</ul>
			</div>
			<div class="gumax-portlet gumax-p-navigation">
				<h5>SEARCH</h5>
			</div>
			<div class="gumax-portlet gumax-p-navigation">
				<h5>TOOLBOX</h5>
			</div>
			<div class="gumax-portlet gumax-p-navigation">
				<h5>LANGUAGES</h5>
			</div>
			<div class="gumax-portlet gumax-p-navigation">
				<h5>Forum Menu</h5>
			</div>
	</div>
	<!-- end of Navigation Menu -->
	<div class="gumax-p-navigation-spacer"></div>

		<!-- gumax-content-actions -->
		<div id="gumax-content-actions">
		<ul>
		</ul>
		<div class="gumax-message"></div>
	</div>
		<!-- end of gumax-content-actions -->

		<!-- gumax-content-body -->
		<div id="gumax-column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading gumax-firstHeading" >Solved: Nwchem 6.3 running 2-5 times slower than 6.1.1</h1>
		<div id="bodyContent" class="gumax-bodyContent">
			<h3 id="siteSub">From NWChem</h3>
			<div id="contentSub"><form id="search_box" action="http:///index.php/Special:AWCforum/search/s" method="post"  enctype="multipart/form-data">
	<input class="search_box" type="submit" value="Search">
        <input name="tID" type="hidden" value="834">
        <input name="fID" type="hidden" value="4">
        <input name="cID" type="hidden" value="2">
        <select class="search_box" name="search_what"> <option value="all">All</option>
        <option value="c">Current Category</option>
        <option value="f">Current Forum</option>
        <option value="t">Current Thread</option>
        </select>
	<input class="search_box" name="kw" type="text" size="20">
</form>Viewed 20266 times, With a total of 11 Posts</div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<table width="100%" cellpadding="0" cellspacing="0">
	<tr>
		<td class="top_user_links">
                	<ul id="TopMenuLinksHolder">
                               <li><a href="../../credits.html">Credits</a></li>
        			<li><a href="../../search.html">Search</a></li>
            <li><a href="../../search/todate.html">Today's Posts</a></li>
        			
        			
    			</ul>
		</td>
	</tr>
</table><table width="100%" cellpadding="0" cellspacing="0" class="bread_crumbs">
	<tr>
		<td width="99%" valign="bottom"><a href="../../index.html">Forum</a> &gt;&gt; <a href="../../sc/id2.html">NWChem's corner</a> &gt;&gt; <a href="../../sf/id4.html">Compiling NWChem</a></td>
	</tr>
</table>
<br />    <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td width="65%" align="left" nowrap="nowrap"></td>                                         
            <td width="35%" class='ThreadOtions' nowrap></td>    
        </tr>
    </table>       <a name="post_3069"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3069" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem1')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem1" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3069.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3069.html">10:39:01 PM PDT - Sun, May 19th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">I've experimented a little bit with nwchem 6.3 (17 May release), and it appears to run much slower than 6.1.1. <br />
<br />
For a benchmark calculation which typically takes only about 40 seconds in 6.1.1 and 6.1, I end up with 190 seconds in nwchem 6.3. All cores are engaged though, and there's nothing odd in top.<br />
<br />
The input file  is shown below:<br />

<pre>scratch_dir /scratch
start benzene 

geometry units angstroms
C  0.100  1.396  0.000
C  1.209  0.698  0.000
C  1.209 -0.698  0.000
C  0.000 -1.396  0.000
C -1.209 -0.698  0.000
C -1.209  0.698  0.000
H  0.000  2.479  0.000
H  2.147  1.240  0.000
H  2.147 -1.240  0.000
H  0.000 -2.479  0.000
H -2.147 -1.240  0.000
H -2.147  1.240  0.000
end

basis
 H library &quot;6-31+g*&quot; 
 c library &quot;6-31+g*&quot;
end
dft
        direct
end

task dft optimize</pre><br />
<br />
The hardware in that particular case is AMD FX 8150 (8 cores)/32 Gb RAM running as a local calculation on debian wheezy/stable with openmpi 1.3 and ACML 5.3.1. Nwchem was kompiled as shown here:<br />

<pre>export LARGE_FILES=TRUE
export TCGRSH=/usr/bin/ssh
export NWCHEM_TOP=`pwd`
export NWCHEM_TARGET=LINUX64
export NWCHEM_MODULES=&quot;all python&quot;
export PYTHONVERSION=2.7
export PYTHONHOME=/usr
export BLASOPT=&quot;-L/opt/acml/acml5.3.1/gfortran64_fma4_int64/lib -lacml&quot;
export USE_MPI=y
export USE_MPIF=y
export USE_MPIF4=y
export MPI_LOC=/usr/lib/openmpi/lib
export MPI_INCLUDE=/usr/lib/openmpi/include
export LIBRARY_PATH=&quot;$LIBRARY_PATH:/usr/lib/openmpi/lib:/opt/acml/acml5.3.1/gfortran64_fma4_int64/lib&quot;
export LIBMPI=&quot;-lmpi -lopen-rte -lopen-pal -ldl -lmpi_f77 -lpthread&quot;
cd $NWCHEM_TOP/src
make clean
make nwchem_config
make FC=gfortran 2&gt; make.err 1&gt;make.log
cd $NWCHEM_TOP/contrib
export FC=gfortran
./getmem.nwchem</pre><br />
<br />
I've also tested it on an i5-2400 (four cores)/16 gb ram and openblas instead of ACML, but otherwise identical parameters. With 6.1.1 it takes ca 50 s (cpu)/52 s (wall) vs 126/127 seconds for nwchem 6.3.<br />
<br />
Finally, I have tested this on a dual-socket xenon cluster running ROCKS 5.4.3 (based on CentOS 5.6) using openblas. Using six cores out of the available eight (again, it is contained on a single node) I get 254 seconds for nwchem 6.3 vs 121 seconds for nwchem 6.1.1.<br />
<br />
In each pair of cases the same build file was used for both 6.1.1 and 6.3.<br />
<br />
The question is: is this normal? Is this an issue with nwchem 6.3? Or the way I build it?<br />
<br />
--<a target='blank' href="../../../User_Ohlincha.html?title=User:Ohlincha&amp;action=edit&amp;redlink=1" class="new" title="User:Ohlincha (page does not exist)">http://verahill.blogspot.com</a> May 20th 4:47 pm <b>Local Time</b>
</td>
		                    </tr>
		                                
		                    <tr>
	<td class="edited_on" align="left" colspan="2">
		<b><a href="../../post/edithistory/3069.html">Edited On</a></b> 7:44:52 PM PDT - Wed, May 22nd 2013 <b>by</b> Ohlincha
	</td>
</tr>
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3071"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3071" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Vladimir/58715.html" onmouseover="mopen('mem2')" onmouseout="mclosetime()">Vladimir</a>  <font class="group_text">Member</font>
                                    <div id="mem2" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Vladimir/58715.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Vladimir/3071.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Vladimir/58715.html">24</a><br />
                                Posts <a href="../../search/memposts/Vladimir/58715.html">86</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3071.html">5:36:35 AM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Same for me.<br />
nwchem 6.3 is aboun 30% slower in HF SCF than 6.1.1 version.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3072"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3072" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Edoapra/337.html" onmouseover="mopen('mem3')" onmouseout="mclosetime()">Edoapra</a>  <font class="group_text">Forum:Admin, Forum:Mod, bureaucrat, sysop</font>
                                    <div id="mem3" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Edoapra/337.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Edoapra/3072.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Edoapra/337.html">10</a><br />
                                Posts <a href="../../search/memposts/Edoapra/337.html">1667</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3072.html">9:23:07 AM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">ARMCI_NETWORK=SOCKETS should be faster<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">The default ARMCI_NETWORK is now MPI-TS. In the case of runs that use a single node,<br />
ARMCI_NETWORK=SOCKETS might give faster run times.<br />
<br />
Here is how to switch<br />
export ARMCI_NETWORK=SOCKETS<br />
cd $NWCHEM_TOP/src/tools<br />
rm -rf build install<br />
make <br />
cd ..<br />
make link
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3081"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3081" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem4')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem4" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3081.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3081.html">4:38:54 PM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Cheers Edo. <br />
<br />
Using SOCKETS brought down the times a fair bit:<br />
On the amd fx8150 where 6.1.1 takes 44+/-3 seconds, 6.3 now takes 56+/-1 seconds (10 repeats).<br />
On the intel i5-2400 where 6.1.1 took 50 s, 6.3 now takes 70 s.<br />
On the dual-socket xenon node 6.1.1 took 78 seconds (retested), while 6.3 now takes 107 seconds.<br />
<br />
My times are now more in line with Vladimir's i.e. 30% above 6.1.1.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3082"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3082" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Edoapra/337.html" onmouseover="mopen('mem5')" onmouseout="mclosetime()">Edoapra</a>  <font class="group_text">Forum:Admin, Forum:Mod, bureaucrat, sysop</font>
                                    <div id="mem5" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Edoapra/337.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Edoapra/3082.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Edoapra/337.html">10</a><br />
                                Posts <a href="../../search/memposts/Edoapra/337.html">1667</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3082.html">5:05:51 PM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Unfortunately, I have just realized that there was an issue in $NWCHEM_TOP/src/tools/GNUmakefile that was preventing ARMCI_NETWORK from being  correctly recognized.<br />
Therefore, I am not 100% sure that you last build did get SOCKETS in place (you can check it by analyzing tools/build/config.log)<br />
<br />
Anyhow,<br />
the patch is available at<br />
<a target='blank' href="../../../../../www.nwchem-sw.org/images/Armcisock.patch.gz" class="external free">http://www.nwchem-sw.org/images/Armcisock.patch.gz</a><br />
<br />
To install:<br />
<code>export ARMCI_NETWORK=SOCKETS<br />
cd $NWCHEM_TOP/src<br />
wget <a target='blank' href="../../../../../www.nwchem-sw.org/images/Armcisock.patch.gz" class="external free">http://www.nwchem-sw.org/images/Armcisock.patch.gz</a><br />
gzip -d Armcisock.patch<br />
patch -p0 &lt; Armcisock.patch<br />
cd tools<br />
rm -rf build install<br />
make<br />
cd ..<br />
make link<br />
</code><br />
<br />
Thanks again for your valuable feedback
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3084"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3084" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem6')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem6" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3084.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3084.html">5:22:59 PM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">1. Looking through src/tools/build/config.log for SOCKETS for an UNPATCHED build:<br />

<pre>configure:6762: result: LINUX64
configure:10516: WARNING: No ARMCI_NETWORK specified, defaulting to SOCKETS
configure:12957: checking whether to enable assertions</pre><br />
and<br />

<pre>
configure:42954: **************************************************************
configure:42956:  Global Arrays (GA) configured as follows:
configure:42958: **************************************************************
configure:42960: 
configure:42962:                 TARGET=LINUX64
configure:42964:              MSG_COMMS=MPI
configure:42966:             GA_MP_LIBS= -lmpi -lopen-rte -lopen-pal -ldl -lmpi_f77 -lpthread
configure:42968:          GA_MP_LDFLAGS= -L/usr/lib/openmpi/lib
configure:42970:         GA_MP_CPPFLAGS= -I/usr/lib/openmpi/include
configure:42972:          ARMCI_NETWORK=SOCKETS
configure:42974:  ARMCI_NETWORK_LDFLAGS
</pre><br />
and<br />

<pre>
ARMCI_NETWORK_SOCKETS_FALSE='#'
ARMCI_NETWORK_SOCKETS_TRUE='
</pre><br />
(there are two apostrophes at the end of the second line)<br />
and<br />

<pre>
#define DATA_SERVER 1
#define SOCKETS 1
#define ENABLE_ARMCI_MEM_OPTION 1
</pre><br />
<br />
2. The patched version of 6.3<br />
Re-running my short calculation ten times with the PATCHED version I get 56 s cpu and 58 s wall for every single run i.e. the unpatched version must have recognised SOCKETS. There is at least no functional difference.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3085"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3085" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Edoapra/337.html" onmouseover="mopen('mem7')" onmouseout="mclosetime()">Edoapra</a>  <font class="group_text">Forum:Admin, Forum:Mod, bureaucrat, sysop</font>
                                    <div id="mem7" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Edoapra/337.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Edoapra/3085.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Edoapra/337.html">10</a><br />
                                Posts <a href="../../search/memposts/Edoapra/337.html">1667</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3085.html">5:48:15 PM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">SOCKETS recognized<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Yes,<br />
You were right by saying that SOCKETS got recognized. I forgot that was the backup in the ARMCI autoconf structure.<br />
<br />
As far as the 6.3 vs 6.1 comparison is concerned, what kind of benchmark was it?<br />
If it was DFT or HF, did you check if the SCF took the same number of iterations?<br />
<br />
Thanks, Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3086"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3086" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem8')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem8" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3086.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3086.html">6:00:16 PM PDT - Mon, May 20th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Edo,<br />
I get four geometry steps for both 6.1.1 and 6.3.<br />
<br />
The 'benchmark' is the benzene dft optimization in my first post in this thread. It's not much of a benchmark, but I have used it extensively in the past to do quick tests. I'll be happy to run a longer, better one -- with SOCKETS at the moment it's a difference of mere seconds.<br />
<br />
Example (AMD FX 8150, 8 cores, 32 gb, ACML 5.3.1 (int, fma4, gfortran)) using 6.1.1<br />

<pre>
@ Step       Energy      Delta E   Gmax     Grms     Xrms     Xmax   Walltime
@ ---- ---------------- -------- -------- -------- -------- -------- --------
@    0    -230.08801905  0.0D+00  0.07175  0.01289  0.00000  0.00000     12.5
@    1    -230.10026114 -1.2D-02  0.01388  0.00296  0.03473  0.13124     21.3
@    2    -230.10088594 -6.2D-04  0.00276  0.00056  0.01271  0.03164     32.8
@    3    -230.10091297 -2.7D-05  0.00009  0.00002  0.00139  0.00502     40.0
@    4    -230.10091305 -7.9D-08  0.00002  0.00000  0.00010  0.00029     44.6
@    4    -230.10091305 -7.9D-08  0.00002  0.00000  0.00010  0.00029     44.6
</pre><br />
<br />
Example using 6.3 without specifying SOCKETS<br />

<pre>
@ Step       Energy      Delta E   Gmax     Grms     Xrms     Xmax   Walltime
@ ---- ---------------- -------- -------- -------- -------- -------- --------
@    0    -230.08801906  0.0D+00  0.07175  0.01289  0.00000  0.00000     38.2
@    1    -230.10023344 -1.2D-02  0.01700  0.00285  0.03171  0.12027     89.2
@    2    -230.10089367 -6.6D-04  0.00258  0.00048  0.01180  0.03599    117.1
@    3    -230.10091297 -1.9D-05  0.00015  0.00003  0.00162  0.00529    164.1
@    4    -230.10091306 -9.2D-08  0.00001  0.00000  0.00014  0.00035    191.5
@    4    -230.10091306 -9.2D-08  0.00001  0.00000  0.00014  0.00035    191.5
</pre><br />
<br />
Example using 6.3 while specifying SOCKETS:<br />

<pre>
@ Step       Energy      Delta E   Gmax     Grms     Xrms     Xmax   Walltime
@ ---- ---------------- -------- -------- -------- -------- -------- --------
@    0    -230.08801906  0.0D+00  0.07175  0.01289  0.00000  0.00000     12.5
@    1    -230.10028794 -1.2D-02  0.01611  0.00278  0.03101  0.12160     27.3
@    2    -230.10089384 -6.1D-04  0.00270  0.00048  0.01079  0.03564     35.6
@    3    -230.10091290 -1.9D-05  0.00026  0.00005  0.00124  0.00482     49.6
@    4    -230.10091306 -1.7D-07  0.00000  0.00000  0.00019  0.00048     58.0
@    4    -230.10091306 -1.7D-07  0.00000  0.00000  0.00019  0.00048     58.0
</pre><br />
<br />
<br />
Edit: the above was obviously the number of DFT optimisation steps, not the SCF iterations that you asked for. There's a difference here:<br />
<br />
6.1.1 does 9, 7, 6, 4, 5 and 2 SCF iterations.<br />
6.3  does 10, 8, 7, 7, 7, 7 and 7 SCF iterations.<br />
<br />
(note: I've repeated the calcs so often that the output below might not be from the exact same run as the output above)<br />

<pre><br />
</pre>
6.1.1<br />

<pre>
 d= 0,ls=0.0,diis     1   -230.1846873327 -4.34D+02  1.53D-02  2.12D+00     2.1
 d= 0,ls=0.0,diis     2   -230.0401177850  1.45D-01  1.44D-02  2.62D-01     2.9
 d= 0,ls=0.0,diis     3   -229.9189400075  1.21D-01  6.88D-03  1.11D+00     3.7
 d= 0,ls=0.0,diis     4   -230.0859601490 -1.67D-01  2.03D-03  1.51D-02     4.5
 d= 0,ls=0.0,diis     5   -230.0874343200 -1.47D-03  6.04D-04  4.09D-03     5.3
 d= 0,ls=0.0,diis     6   -230.0879684761 -5.34D-04  1.70D-04  3.63D-04     6.1
 d= 0,ls=0.0,diis     7   -230.0880070289 -3.86D-05  8.09D-05  8.00D-05     7.0
 d= 0,ls=0.0,diis     8   -230.0880181862 -1.12D-05  1.98D-05  6.07D-06     7.8
 d= 0,ls=0.0,diis     9   -230.0880190533 -8.67D-07  4.12D-06  1.45D-07     8.6
 d= 0,ls=0.0,diis     1   -230.0940137547 -4.32D+02  3.37D-03  2.61D-02    12.3
 d= 0,ls=0.0,diis     2   -230.0985355007 -4.52D-03  1.32D-03  1.33D-02    13.2
 d= 0,ls=0.0,diis     3   -230.0983868780  1.49D-04  8.98D-04  1.27D-02    14.0
 d= 0,ls=0.0,diis     4   -230.1001155261 -1.73D-03  2.72D-04  9.31D-04    14.8
 d= 0,ls=0.0,diis     5   -230.1002464623 -1.31D-04  7.14D-05  1.15D-04    15.6
 d= 0,ls=0.0,diis     6   -230.1002609443 -1.45D-05  1.96D-05  1.74D-06    16.4
 d= 0,ls=0.0,diis     7   -230.1002611376 -1.93D-07  6.88D-06  3.08D-07    17.2
 d= 0,ls=0.0,diis     1   -230.1006971476 -4.33D+02  6.87D-04  9.65D-04    21.0
 d= 0,ls=0.0,diis     2   -230.1007907138 -9.36D-05  3.24D-04  6.71D-04    21.8
 d= 0,ls=0.0,diis     3   -230.1008012839 -1.06D-05  1.84D-04  5.24D-04    22.6
 d= 0,ls=0.0,diis     4   -230.1008761633 -7.49D-05  6.07D-05  3.72D-05    23.4
 d= 0,ls=0.0,diis     5   -230.1008816761 -5.51D-06  1.01D-05  1.13D-06    24.2
 d= 0,ls=0.0,diis     6   -230.1008818053 -1.29D-07  3.79D-06  1.74D-07    25.0
 d= 0,ls=0.0,diis     1   -230.1008836620 -4.33D+02  7.86D-05  1.23D-05    26.1
 d= 0,ls=0.0,diis     2   -230.1008848385 -1.18D-06  3.70D-05  8.57D-06    26.9
 d= 0,ls=0.0,diis     3   -230.1008849763 -1.38D-07  2.07D-05  6.71D-06    27.7
 d= 0,ls=0.0,diis     4   -230.1008859360 -9.60D-07  6.90D-06  4.69D-07    28.5
 d= 0,ls=0.0,diis     1   -230.1009013337 -4.33D+02  1.36D-04  4.95D-05    32.2
 d= 0,ls=0.0,diis     2   -230.1009089686 -7.63D-06  6.20D-05  3.09D-05    33.0
 d= 0,ls=0.0,diis     3   -230.1009089399  2.87D-08  4.18D-05  2.70D-05    33.8
 d= 0,ls=0.0,diis     4   -230.1009127547 -3.81D-06  1.09D-05  1.57D-06    34.7
 d= 0,ls=0.0,diis     5   -230.1009129705 -2.16D-07  2.91D-06  2.17D-07    35.5
 d= 0,ls=0.0,diis     1   -230.1009130375 -4.33D+02  2.05D-05  1.19D-07    39.2
 d= 0,ls=0.0,diis     2   -230.1009130490 -1.15D-08  3.57D-06  9.41D-08    40.0

</pre><br />
<br />
6.3 (sockets):<br />

<pre>
 d= 0,ls=0.0,diis     1   -230.1846873327 -4.34D+02  1.53D-02  2.12D+00     1.7
 d= 0,ls=0.0,diis     2   -230.0401171170  1.45D-01  1.44D-02  2.62D-01     2.4
 d= 0,ls=0.0,diis     3   -229.9189392569  1.21D-01  6.88D-03  1.11D+00     3.2
 d= 0,ls=0.0,diis     4   -230.0859593631 -1.67D-01  2.02D-03  1.51D-02     4.0
 d= 0,ls=0.0,diis     5   -230.0874336088 -1.47D-03  6.05D-04  4.09D-03     4.7
 d= 0,ls=0.0,diis     6   -230.0879684673 -5.35D-04  2.03D-04  3.63D-04     5.5
 d= 0,ls=0.0,diis     7   -230.0880070291 -3.86D-05  2.52D-04  7.99D-05     6.3
 d= 0,ls=0.0,diis     8   -230.0879494068  5.76D-05  1.54D-04  4.63D-04     7.0
 d= 0,ls=0.0,diis     9   -230.0880181652 -6.88D-05  2.67D-05  6.27D-06     7.8
 d= 0,ls=0.0,diis    10   -230.0880190566 -8.91D-07  3.58D-06  1.37D-07     8.6
 d= 0,ls=0.0,diis     1   -230.0936723836 -4.33D+02  3.20D-03  2.75D-02    12.2
 d= 0,ls=0.0,diis     2   -230.0984010434 -4.73D-03  1.37D-03  1.42D-02    13.0
 d= 0,ls=0.0,diis     3   -230.0982162514  1.85D-04  9.29D-04  1.38D-02    13.8
 d= 0,ls=0.0,diis     4   -230.1001000219 -1.88D-03  2.75D-04  9.56D-04    14.5
 d= 0,ls=0.0,diis     5   -230.1002342285 -1.34D-04  7.22D-05  1.19D-04    15.3
 d= 0,ls=0.0,diis     6   -230.1002491001 -1.49D-05  1.96D-05  1.73D-06    16.1
 d= 0,ls=0.0,diis     7   -230.1002492881 -1.88D-07  1.65D-05  3.35D-07    16.9
 d= 0,ls=0.0,diis     8   -230.1002492104  7.77D-08  9.64D-06  8.94D-07    17.6
 d= 0,ls=0.0,diis     1   -230.1002121452 -4.33D+02  3.33D-04  3.14D-04    18.6
 d= 0,ls=0.0,diis     2   -230.1002675856 -5.54D-05  1.43D-04  1.58D-04    19.3
 d= 0,ls=0.0,diis     3   -230.1002652577  2.33D-06  9.86D-05  1.54D-04    20.1
 d= 0,ls=0.0,diis     4   -230.1002862056 -2.09D-05  2.94D-05  1.11D-05    20.9
 d= 0,ls=0.0,diis     5   -230.1002877573 -1.55D-06  7.69D-06  1.40D-06    21.7
 d= 0,ls=0.0,diis     6   -230.1002879343 -1.77D-07  1.99D-06  1.61D-08    22.4
 d= 0,ls=0.0,diis     7   -230.1002879361 -1.75D-09  1.65D-06  3.26D-09    23.2
 d= 0,ls=0.0,diis     1   -230.1006320799 -4.33D+02  8.28D-04  1.29D-03    26.8
 d= 0,ls=0.0,diis     2   -230.1007729436 -1.41D-04  3.60D-04  9.01D-04    27.6
 d= 0,ls=0.0,diis     3   -230.1007791735 -6.23D-06  2.17D-04  7.47D-04    28.3
 d= 0,ls=0.0,diis     4   -230.1008878211 -1.09D-04  6.13D-05  3.94D-05    29.1
 d= 0,ls=0.0,diis     5   -230.1008935156 -5.69D-06  1.22D-05  2.51D-06    29.9
 d= 0,ls=0.0,diis     6   -230.1008938217 -3.06D-07  4.72D-06  1.55D-07    30.7
 d= 0,ls=0.0,diis     7   -230.1008938410 -1.93D-08  2.33D-06  8.52D-09    31.4
 d= 0,ls=0.0,diis     1   -230.1009059134 -4.33D+02  1.01D-04  2.75D-05    35.0
 d= 0,ls=0.0,diis     2   -230.1009108873 -4.97D-06  4.12D-05  1.31D-05    35.8
 d= 0,ls=0.0,diis     3   -230.1009106237  2.64D-07  2.90D-05  1.33D-05    36.6
 d= 0,ls=0.0,diis     4   -230.1009124240 -1.80D-06  8.44D-06  9.03D-07    37.4
 d= 0,ls=0.0,diis     5   -230.1009125483 -1.24D-07  2.28D-06  1.29D-07    38.1
 d= 0,ls=0.0,diis     6   -230.1009125647 -1.64D-08  4.62D-07  8.26D-10    38.9
 d= 0,ls=0.0,diis     7   -230.1009125648 -8.00D-11  3.84D-07  2.41D-10    39.7
 d= 0,ls=0.0,diis     1   -230.1009127343 -4.33D+02  1.57D-05  6.68D-07    40.6
 d= 0,ls=0.0,diis     2   -230.1009128522 -1.18D-07  6.43D-06  3.39D-07    41.4
 d= 0,ls=0.0,diis     3   -230.1009128494  2.77D-09  4.48D-06  3.14D-07    42.2
 d= 0,ls=0.0,diis     4   -230.1009128916 -4.22D-08  1.34D-06  2.33D-08    43.0
 d= 0,ls=0.0,diis     5   -230.1009128948 -3.20D-09  3.60D-07  3.29D-09    43.7
 d= 0,ls=0.0,diis     6   -230.1009128952 -4.10D-10  6.91D-08  9.27D-11    44.5
 d= 0,ls=0.0,diis     7   -230.1009128952  5.68D-14  5.56D-08  7.97D-11    45.3
 d= 0,ls=0.0,diis     1   -230.1009130006 -4.33D+02  1.15D-05  3.22D-07    48.9
 d= 0,ls=0.0,diis     2   -230.1009130278 -2.72D-08  6.00D-06  2.58D-07    49.6
 d= 0,ls=0.0,diis     3   -230.1009130351 -7.32D-09  3.42D-06  1.79D-07    50.4
 d= 0,ls=0.0,diis     4   -230.1009130611 -2.60D-08  1.07D-06  1.14D-08    51.2
 d= 0,ls=0.0,diis     5   -230.1009130628 -1.67D-09  1.96D-07  5.17D-10    52.0
 d= 0,ls=0.0,diis     6   -230.1009130628 -5.19D-11  6.89D-08  1.26D-10    52.7
 d= 0,ls=0.0,diis     7   -230.1009130628 -6.65D-12  3.19D-08  7.77D-11    53.5
</pre>
</td>
		                    </tr>
		                                
		                    <tr>
	<td class="edited_on" align="left" colspan="2">
		<b><a href="../../post/edithistory/3086.html">Edited On</a></b> 6:33:59 PM PDT - Wed, May 22nd 2013 <b>by</b> Ohlincha
	</td>
</tr>
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3092"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3092" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem9')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem9" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3092.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3092.html">5:16:06 PM PDT - Tue, May 21st 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Edo,<br />
there's another thing puzzling me:<br />
<div class='quote_title'>Quote:<div class='quote'>You were right by saying that SOCKETS got recognized. I forgot that was the backup in the ARMCI autoconf structure.</div id="quote"></div id="quote"><br />
<br />
Looking through src/tools/build/config.log for both building with export ARMCI_NETWORK=SOCKETS and without, I see the message about defaulting to SOCKETS. Yet the performance with and without explicitly setting ARMCI_NETWORK to SOCKETS is very different. Either different stages of the compilation default to different, well, defaults, or something fishy is going on.<br />
<br />
Based on what you said in your first post,<br />
<div class='quote_title'>Quote:<div class='quote'><br />
The default ARMCI_NETWORK is now MPI-TS. <br />
</div id="quote"></div id="quote"><br />
I guess the defaults are currently being inconsistent, which is something that should be fixed somewhere down the line.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3103"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3103" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Edoapra/337.html" onmouseover="mopen('mem10')" onmouseout="mclosetime()">Edoapra</a>  <font class="group_text">Forum:Admin, Forum:Mod, bureaucrat, sysop</font>
                                    <div id="mem10" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Edoapra/337.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Edoapra/3103.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Edoapra/337.html">10</a><br />
                                Posts <a href="../../search/memposts/Edoapra/337.html">1667</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3103.html">5:49:56 PM PDT - Wed, May 22nd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">Fix for reducing the number of SCF cycles<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">The following is a fix, not fully validated yet, for getting the number of SCF iterations <br />
of the DFT code from the 6.3 version close to the 6.1 behavior<br />
<br />
The patch is available at the following URL<br />
<a target='blank' href="../../../../../www.nwchem-sw.org/images/Iswtch.patch.gz" class="external free">http://www.nwchem-sw.org/images/Iswtch.patch.gz</a><br />
<br />
To apply<br />
<code><br />
cd $NWCHEM_TOP/src<br />
wget <a target='blank' href="../../../../../www.nwchem-sw.org/images/Iswtch.patch.gz" class="external free">http://www.nwchem-sw.org/images/Iswtch.patch.gz</a><br />
gzip -d Iswtch.patch<br />
patch -p0 &lt; Iswtch.patch<br />
cd nwdft/scf_dft<br />
make<br />
cd ../..<br />
make link<br />
</code>
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3104"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3104" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem11')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem11" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3104.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3104.html">6:57:41 PM PDT - Wed, May 22nd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">I've patched and tested it, and discovered that I made a typo above in the list over the number of SCF iterations -- 6.3 does one more cycle than 6.1.1 it seems (still same number of DFT optimisation steps, 4, though)<br />
<br />
I think it worked: I get 10, 6, 6, 2 and 3 SCF iterations <br />
c.f.<br />
<div class='quote_title'>Quote:<div class='quote'><br />
6.1.1 does 9, 7, 6, 4, 5 and 2 SCF iterations.<br />
6.3 does 10, 8, 7, 7, 7, 7 and 7 SCF iterations.<br />
</div id="quote"></div id="quote"><br />
<br />
I've got too many versions and too much data floating around, so I'll start with freshly extracted sources and redo the tests.<br />
<br />
From what I can see the execution times are now down to about the same as 6.1.1 when you patch 6.3 with Iswtch,path and set ARMCI_NETWORK=SOCKETS:<br />

<pre>
 Total times  cpu:       39.1s     wall:       40.9s
 Total times  cpu:       45.3s     wall:       47.1s
 Total times  cpu:       46.1s     wall:       48.1s
 Total times  cpu:       41.9s     wall:       43.7s
 Total times  cpu:       47.2s     wall:       51.2s
 Total times  cpu:       44.6s     wall:       47.2s
 Total times  cpu:       38.9s     wall:       40.8s
 Total times  cpu:       44.9s     wall:       47.1s
 Total times  cpu:       44.7s     wall:       46.9s
 Total times  cpu:       45.9s     wall:       47.9s
</pre><br />
<br />
<br />
Thank you Edo!<br />
<br />
I'll do some more tests and report back if it looks different.
</td>
		                    </tr>
		                                
		                    <tr>
	<td class="edited_on" align="left" colspan="2">
		<b><a href="../../post/edithistory/3104.html">Edited On</a></b> 6:59:02 PM PDT - Wed, May 22nd 2013 <b>by</b> Ohlincha
	</td>
</tr>
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_3106"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_3106" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                     <a href="../../mem_profile/Ohlincha/1364.html" onmouseover="mopen('mem12')" onmouseout="mclosetime()">Ohlincha</a>  <font class="group_text">Member</font>
                                    <div id="mem12" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        <a href="../../mem_profile/Ohlincha/1364.html"><b>Profile</b></a><br />
                                        
                                        Send <a href="../../member_options/pmnew/Ohlincha/3106.html">PM</a>
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                <DIV align="center"><img class="adv" src="../../../../extensions/awc/forums/images/avatars/avatar_default.gif" border="0" height="0" width="0" align="middle"/></div>
                                
                                Threads <a href="../../search/memtopics/Ohlincha/1364.html">16</a><br />
                                Posts <a href="../../search/memposts/Ohlincha/1364.html">115</a>                              
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id3106.html">8:34:12 PM PDT - Wed, May 22nd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Edo,<br />
I've started with fresh sources, and have compared patched and unpatched versions (with openblas or acml).<br />
<br />
It worked.<br />
I get<br />

<pre>  patched: 10,8,6,4,3 scf steps<br />
</pre>
unpatched: 10,8,7,7,7,5 scf steps<br />
<br />
I also confirmed that unpatched 6.3, in addition to doing more SCF cycles per optimisation step, also does one extra set of cycles (1-7-1-7) during the second DFT geometry optimisation step: <br />
(cat test.out|egrep "d= 0|@")<br />
<br />
Unpatched version<br />

<pre>
@    2    -230.10089843 -4.4D-04  0.00174  0.00035  0.00946  0.02027     30.0
 d= 0,ls=0.0,diis     1   -230.1009079200 -4.33D+02  1.34D-04  2.13D-05    29.3
 d= 0,ls=0.0,diis     2   -230.1009116988 -3.78D-06  3.31D-05  6.41D-06    30.1
 d= 0,ls=0.0,diis     3   -230.1009113295  3.69D-07  2.19D-05  8.30D-06    30.9
 d= 0,ls=0.0,diis     4   -230.1009124163 -1.09D-06  7.07D-06  5.27D-07    31.7
 d= 0,ls=0.0,diis     5   -230.1009124888 -7.24D-08  1.69D-06  8.46D-08    32.4
 d= 0,ls=0.0,diis     6   -230.1009124997 -1.10D-08  4.71D-07  7.33D-10    33.2
 d= 0,ls=0.0,diis     7   -230.1009124998 -6.67D-11  3.56D-07  2.42D-10    34.0
 d= 0,ls=0.0,diis     1   -230.1009125958 -4.33D+02  1.55D-05  2.78D-07    34.9
 d= 0,ls=0.0,diis     2   -230.1009126449 -4.91D-08  3.61D-06  8.82D-08    35.7
 d= 0,ls=0.0,diis     3   -230.1009126412  3.69D-09  2.42D-06  1.06D-07    36.5
 d= 0,ls=0.0,diis     4   -230.1009126548 -1.36D-08  7.88D-07  6.60D-09    37.3
 d= 0,ls=0.0,diis     5   -230.1009126557 -8.82D-10  2.04D-07  1.32D-09    38.0
 d= 0,ls=0.0,diis     6   -230.1009126558 -1.67D-10  3.35D-08  7.94D-11    38.8
 d= 0,ls=0.0,diis     7   -230.1009126558  1.36D-12  1.38D-08  7.66D-11    39.6
@    3    -230.10091266 -1.4D-05  0.00021  0.00004  0.00193  0.00737     44.0
</pre><br />
<br />
Patched version:<br />

<pre>
@    2    -230.10090574 -2.5D-04  0.00126  0.00030  0.00679  0.01605     29.3
 d= 0,ls=0.0,diis     1   -230.1009101932 -4.33D+02  1.13D-04  1.13D-05    28.7
 d= 0,ls=0.0,diis     2   -230.1009123213 -2.13D-06  2.11D-05  2.38D-06    29.4
 d= 0,ls=0.0,diis     3   -230.1009122054  1.16D-07  1.34D-05  2.98D-06    30.2
 d= 0,ls=0.0,diis     4   -230.1009125831 -3.78D-07  4.50D-06  2.33D-07    31.0
@    3    -230.10091258 -6.8D-06  0.00029  0.00006  0.00150  0.00369     35.4
</pre><br />
<br />
This is reproducible -- I've tested it on five different machines, using intel or amd, and linked against acml or openblas.<br />
<br />
Anyway, the patch makes the performance of 6.3 comparable to that of 6.1.1.<br />
Thanks again!
</td>
		                    </tr>
		                                
		                    <tr>
	<td class="edited_on" align="left" colspan="2">
		<b><a href="../../post/edithistory/3106.html">Edited On</a></b> 8:35:33 PM PDT - Wed, May 22nd 2013 <b>by</b> Ohlincha
	</td>
</tr>
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0" class="bot_breadcrumbs_and_pagejump">
	<tr>
		<td width="100%" class="bot_breadcrumbs"><a href="../../index.html">Forum</a> &gt;&gt; <a href="../../sc/id2.html">NWChem's corner</a> &gt;&gt; <a href="../../sf/id4.html">Compiling NWChem</a></td>
	</tr>
	<tr>
		<td width="100%" class="bot_pagejumps"></td>
	</tr>
</table>
<br /><br />      <br />
        	<table class="whos_here" width="100%" cellpadding="0" cellspacing="0">
        			<tr>
                  <td width="100%" class="whos_here_header">
                        <a href="../../whoshere.html">Who's here now</a> 
                        Members 0
                        Guests 1
                        Bots/Crawler 0
                   </td>
         				</tr>
        				<tr>
        					<td class="whos_here_row"></td>
        				</tr>
        </table><br /><hr>
            <center>
                <a href="http://wiki.anotherwebcom.com/" target="_blank" title="PHP, Visual Basic  scripts and programs">AWC's</a>:
                 <b>2.5.10</b> MediaWiki - Stand Alone Forum Extension<br />Forum theme style by: <a target='blank' href='wiki.anotherwebcom.html'>AWC</a></center><div class="printfooter">
Retrieved from "<a href="index.html">http:///index.php/Special:AWCforum/st/id834/</a>"</div>
			<div id='catlinks' class='catlinks catlinks-allhidden'></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
	<!-- end of gumax-content-body -->


	<!-- ///// gumax-footer ///// -->
	<div id="gumax-footer">

			<!-- personal tools  -->
	<div id="gumax-personal-tools">
		<h5>Toolbox</h5>
		<ul>
<li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
		</ul>
	</div>
	<!-- end of personal tools  -->

		<div class="gumax-footer-spacer"></div>

			<!-- gumax-f-list -->
	<div id="gumax-f-list">
		<ul>
							<li id="privacy"><a href="../../../NWChem_Privacy_policy.html" title="NWChem:Privacy policy">Privacy policy</a></li>
							<li>/</li>							<li id="about"><a href="../../../NWChem_About.html" title="NWChem:About">About NWChem</a></li>
							<li>/</li>							<li id="disclaimer"><a href="../../../NWChem_General_disclaimer.html" title="NWChem:General disclaimer">Disclaimers</a></li>
							<li>/</li>						<li id="f-poweredby"><a href="http://mediawiki.org/" target="_blank">Powered by MediaWiki</a></li>
			<li>&#47;</li>
			<li id="f-designedby"><a href="http://paulgu.com/" target="_blank">Designed by Paul Gu</a></li>
		</ul>
	</div>
	<!-- end of gumax-f-list -->

	</div>
	<!-- ///// end of gumax-footer ///// -->


</div>
<!-- ===== end of gumax-page ===== -->

	</td><td id="gumax-page-table-right"><img src="../../../../skins/gumax/blank.gif" alt="" /></td></tr></table>
	<!--[if lt IE 7]>
		<script type="text/javascript">pngfix('td');</script>
	<![endif]-->

</div>
<!-- ##### end of gumax-wrapper ##### -->



<script>if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 1.411 secs. --></body>
<!-- Mirrored from /index.php/Special:AWCforum/st/id834/#post_3106 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Jun 2020 03:21:34 GMT -->
</html>





