<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.16.4" />
<meta name="keywords" content="Linking NWChem against Intel's MKL Viewed 6350 times, With a total of 6 Posts" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/gumax/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/gumax/IE70Fixes.css?270" media="screen" /><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?270"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>
var skin="gumax",
stylepath="/skins",
wgUrlProtocols="http.html\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/index.php/$1",
wgScriptPath="",
wgScriptExtension=".php",
wgVariantArticlePath=false,
wgActionPaths={},
wgCanonicalNamespace="Special",
wgCanonicalSpecialPageName="AWCforum",
wgNamespaceNumber=-1,
wgPageName="Special:AWCforum",
wgTitle="AWCforum",
wgAction="view",
wgArticleId=0,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=true,
wgCurRevisionId=0,
wgVersion="1.16.4",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "NWChem", "5": "NWChem talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "500": "Release-60", "501": "Release-60 talk", "502": "Release61", "503": "Release61 talk", "504": "Release62", "505": "Release62 talk", "506": "Release64", "507": "Release64 talk", "508": "Release65", "509": "Release65 talk", "510": "Development", "511": "Development talk", "512": "Release66", "513": "Release66 talk", "121707": "Forum"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "nwchem": 4, "nwchem_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "release-60": 500, "release-60_talk": 501, "release61": 502, "release61_talk": 503, "release62": 504, "release62_talk": 505, "release64": 506, "release64_talk": 507, "release65": 508, "release65_talk": 509, "development": 510, "development_talk": 511, "release66": 512, "release66_talk": 513, "forum": 121707, "ns_reldoc64": "NS_RELDOC65", "ns_reldoc64_talk": "NS_RELDOC65_TALK", "image": 6, "image_talk": 7},
wgSiteName="NWChem",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script>
		<!-- Head Scripts -->
<style type="text/css">
#bodyContent a[href ^="http://"] {
background: none;
    padding-right: 0px;
}

#bodyContent a.external {
background: none;
	padding-right: 0px;
}

#p-cactions li a {
text-transform: capitalize;
}

#contentSub {
margin: 0;
padding: 2px;
padding-bottom: 6px;
}

pre {
margin:0px; 
    padding:5px;
    padding-bottom:20px;  
    
    width: 600px;
    overflow:auto;
    overflow-y: visible;
    line-height: 100%;
}

.top_user_links {
margin: 0;
    padding: 0;
    border-bottom: 1px solid #aaa;
    text-align: right;
}

#TopMenuLinksHolder li a:hover {

}

#TopMenuLinksHolder li a {

}

#TopMenuLinksHolder li {
margin-top: 4px;   
    margin-left: 4px;
    margin-bottom: 0px;
    
    padding: 3px;
    
    list-style: none;
    float: right;
    display: block;
    
    width: auto;
    white-space: nowrap;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    color: #000;
    text-decoration: none;
    font: 11px Verdana;
    text-align: left;
    z-index: 3;
}

#TopMenuLinksHolder a:visited {

}

#TopMenuLinksHolder div a:hover {
background: #FFF;
    color: #000;
}

#TopMenuLinksHolder div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        width: auto;
        white-space: nowrap;
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#TopMenuLinksHolder div {
position: absolute;
    visibility: hidden;
    margin: 0;
    padding: 0;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
}

#TopMenuLinksHolder {
margin: 0;
    padding: 0;
    z-index: 3;
}

.UserNameOptions {

}

#UserNameOptions a:visited {

}

#UserNameOptions li a:hover {

}

#UserNameOptions li a {
font: 11px Verdana;
}

#UserNameOptions li {
list-style: none;
    display: block;
    white-space: nowrap;
    border: 0px;
    color: #000;
    text-align: left;
    text-decoration: none;
}

#UserNameOptions div a:hover {
color: #FFF;
}

#UserNameOptions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        
        width: 500px;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#UserNameOptions div {
position: absolute;
    display: block;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    font: 12px arial;
    line-height: 100%;
}

#UserNameOptions {
margin: 0;
    padding: 0;
    z-index: 2;
}

.group_text {
font-size: 84%;
    width: auto;
    padding: 0px;
}

.edited_on {
border-top: 1px solid #aaa;
    margin: 0px;
    margin-bottom: 0px;
    padding-left: 5px;
    font-size: 12px;
}

.post_title {

}

.post_date {
border-bottom: 1px solid #aaa;
    font-size: 90%;
    padding-left: 2px;
}

.post_td {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    margin: .0em;
    padding: .0em;
}

.post_body {
padding: .5em;
    padding-top: 0px;
}

.post0 {
background-color: #E5E5E5;
    border-left: 1px solid #aaa;
    padding: .0em;
}

.post1 {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding-bottom: .0em;
}

.post_footer {
/* post, quote, edit buttons */
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.post_box {
margin-top: 5px;
    margin-left: 5px;
    margin-right: 2px;
    width: auto;
}

.mem_name {
border-bottom: 1px solid #aaa;
    margin: 0;
    padding: .4em;
}

.adv {
border: 0px;
    margin: 0em;
    padding: 0em;
}

.thread_sig {
border-top: 2px solid #aaa;
    margin: 3px;
    padding-left: 5px;
}

#subscribe_menu {
position: absolute;
    background: #ccc ;
    border: 1px solid #aaa;
    border-top: 0px;
    margin: 0em;
    padding: 5px;
    padding-top: 0px;
    top:auto;
    right:65px;
    z-index: 2;
}

.drop_down_buttons:hover {
background: #ccc ;
}

.drop_down_buttons {
margin: 0em;
    white-space: nowrap;
    border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 5px;
    color: #000;
    text-align: center;
    background: #fff ;
}

.mod_menu_row {
text-align: left;
}

.post_buttons:hover {
background: #fff ;
}

.post_buttons {
white-space: nowrap;
    float: right;
    margin-top: .5em;
    margin-right: 5px;
    border: 1px solid #aaa;
    border-bottom: 0em;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 0px;
    color: #000;
}

.quote_title {
border: 1px dashed #aaa;
	padding: 5px;
	background-color: #f9f9f9;
	font-family:"Courier New", Courier, mono;
}

.quote {
border-top: 1px solid #000;
	background-color: #fff;
	padding: 10px;
	font-size: 95%;
}

.user_options_row {
border: 1px solid #aaa;
    background: #fff ;
    padding: .3em;
}

.t_userinfo {
white-space:nowrap;
    text-align: left;
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.ThreadOtions {
margin: 0;
    padding: 0;
    text-align: right;
}

#ThreadOtions a:visited {

}

#ThreadOtions li a:hover {

}

#ThreadOtions li a {
border: 1px solid #aaa;
    border-bottom: 0em;
    padding: 4px;
}

#ThreadOtions li {
list-style: none;
    display: block;
    white-space: nowrap;
    
    border: 0px;
    color: #000;
    
    text-decoration: none;
    z-index: 3;
}

#ThreadOtions div a:hover {
background: #FFF;
    color: #000;
}

#ThreadOtions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 2px;
        border: 0em;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#ThreadOtions div {
position: absolute; 
    right: 50px;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    text-align: left;
}

#ThreadOtions {
margin-top: 3px;
    padding: 0;
    z-index: 3;
}

.forum_posts {
border: 1px solid #aaa;
    margin: 0em;
    padding: 0em;
    width: 100%;

 width: 100%;
}

.post {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding: .0em;
}

#search_box {
white-space:nowrap;
    text-align: right; 
    margin: .0em;
    padding: 0px;
}

.search_box {
float: right;
    font-size: 97%;
    margin: .0em;
    color: #000;
    background: #fff;
    border: 1px solid #000;
    margin-left: 5px;
    padding: 0px;
}

.highlightsearchword {
color: #FF0000;
}

.poll_display_table {
border: 1px solid #aaa;
    
    padding: 1px;
}

.poll_displayheader {
border-bottom: 1px dashed #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_row {
border-bottom: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 2px;
}

.poll_display_vote_total {
border-top: 1px solid #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_vote_numbers_header {
border: 1px solid #aaa;
border-bottom: 0;
}

.poll_display_vote_percent_header {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option_header {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_numbers {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_percent {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_percent_color_op10 {
background-color: #7FFF00;
}

.poll_percent_color_op1 {
background-color: #CD5555;
}

.poll_percent_color_op2 {
background-color: #5CACEE;
}

.poll_percent_color_op3 {
background-color: #FFCC11;
}

.poll_percent_color_op4 {
background-color: #668014;
}

.poll_percent_color_op5 {
background-color: #A0522D;
}

.poll_percent_color_op6 {
background-color: #9F79EE;
}

.poll_percent_color_op7 {
background-color: #EE00EE;
}

.poll_percent_color_op8 {
background-color: #DC143C;
}

.poll_percent_color_op9 {
background-color: #551011;
}

.page_jumps_top:hover {
background: #ccc ;
}

.page_jumps_top {
white-space: nowrap;
    display: inline;
    
    margin: 0px; 
    margin-right: 2px;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 4px;
    
    color: #000;
}

.page_jumps_bot:hover {
background: #ccc ;
}

.page_jumps_bot {
border: 1px solid #aaa;
    border-top: 0px;
    padding-top: 2px;
    margin-left: 2px;
    font-size: 100%;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 2px;
}

.main_memtable {
border: 1px solid #aaa;
}

.main_leftmenu {
border-right: 1px solid #aaa;
     background-color: #f9f9f9;
     width: 175px;
}

.leftmenuheaders {
border: 1px dashed #aaa;
    padding: 2px;
    font-family:"Courier New", Courier, mono;
}

.leftmenu {
background-color: #f9f9f9;
}

.right_body {
padding: 2px;
}

.mem_pm_table {
border: 1px solid #aaa;
    padding: 2px;
    margin: 7px;
}

.pm_header_new {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_title {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:85%;
}

.pm_header_sender {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_date {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_row {
background-color: #f9f9f9;
    border: 1px solid #000;
    padding: 3px;
}

#cat_list_lastaction_user {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 100%;
}

#cat_list_lastaction_date {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#cat_list_lastaction_title {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#small_desc {
font-size: 84%;
    color: #7d7d7d;
	margin-left: 10px;
    width: auto;
}

#cat_forumdisc {
font-size: 84%;
    color: #7d7d7d;
    margin-left: 10px;
    width: auto;
}

.cat_forumrows {
border: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 5px;
    font-size: 95%;
}

.thread_col_head {
border: 1px solid #aaa;
    margin: 0px;
    padding: 5px;
    white-space: nowrap;
}

.bread_crumbs {
border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 2px;
    text-align: left;
}

.dl_maintable_head {
border-right: 1px solid #aaa;
    border-bottom: 1px solid #aaa;
    background-color: #fff;
    padding: 2px;
}

.dl_maintable {
border: 1px solid #aaa;
    margin: 1px;
    padding: 1px;
}

.right_float {
float: right;
	margin-top: 8px;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.right {
float: right;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.spacer {
background-color: #aaa;
}

.whos_here_header {
border-bottom: 1px dashed #aaa;
            padding: 4px;
            font-family:"Courier New", Courier, mono;
}

.whos_here_row {
border-bottom: 1px solid #aaa;
            background-color: #f9f9f9;
            padding: 2px;
}

.whos_here {
border: 1px solid #aaa;
            border-bottom: 0;
}

.nothing {
font-size: 0%;
            margin: .0em;
            border: 0;
            margin: 0;
            padding: 0;
            width: 0;
}

.forum_stats {
border: 1px solid #aaa;
            border-bottom: 0;
}

.forum_stats_leftcol {
border-bottom: 1px solid #aaa;
                background-color: #f9f9f9;
                padding: 2px;
}

.forum_stats_rightcol {
background-color: #f9f9f9;
                border-bottom: 1px solid #aaa;
                padding: 2px;
}

.forum_stats_header {
border-bottom: 1px dashed #aaa;
                padding: 4px;
                font-family:"Courier New", Courier, mono;
}

.thread_rows0 {
background-color: #E5E5E5;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows1 {
background-color: #f3f3f3;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows {
background-color: #f9f9f9;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

#annc {
border: 1px solid #000;
	background-color: red;
	padding: 0px;
}

.sticky {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #ffa; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

.thread_lastaction {
font-size: 84%;
    text-align: right;
    white-space: nowrap;
    display: inline;
}

.pagejumps_PostOnForumPage:hover {
background: #ccc ;
}

.pagejumps_PostOnForumPage {
border: 1px solid #aaa;
    margin-left: 3px;
    font-size: 100%;
    padding-left: 3px;
    padding-right: 3px;
    padding-bottom: 0px;
}

.new_thread_button:hover {
background: #ccc ;
}

.new_thread_button {
white-space: nowrap;
    float: right;
    display: inline; /*fixes IE float bug*/
    margin-top: 0px; 
    margin-bottom: 0px; 
    margin-left: 10px;
   /* margin-left: -4px; */
    border: 1px solid #aaa;
    border-bottom: 0px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 3px;
    text-align: left; /* 2.4.1 */
    color: #000;
}

#row_info td {
border: 1px solid #aaa;
	border-top: 0px;
	background-color: #f9f9f9;
	padding: 5px;
	font-size: 95%;
}

.page_jumps_holder_thread_bot {
border-bottom: 1px solid #aaa;
}

.page_jumps_holderBot {

}

.poll_thread_listing {
border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #FFCC00;
    padding: 2px;
    font-size: 95%;
}

.locked_thread {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #e2ffe2; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

#ajax_pmname {
text-align: left;
}

#ajax_pmname ul {
list-style: none;
margin: 0;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li:hover {
background: #f9f9f9;
	margin-left: .1em;
	text-decoration: underline;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

</style>


		<!-- gumax customized style -->

					<style type="text/css">
				#gumax-content-actions li#ca-talk,
				#gumax-content-actions li#ca-history,
				#gumax-content-actions li#ca-edit,
				#gumax-personal-tools
				{ display: none; }
			</style>
		
		<!--[if lt IE 7]>
			<script type="text/javascript" src="/skins/gumax/js/ieunitpngfix-tag.js"></script>
		<![endif]-->

		<!-- end of gumax customized style -->
</head>


<body class="mediawiki ltr ns--1 ns-special page-Special_AWCforum_st_id709 skin-gumax">

	</div>
	<!-- ///// end of gumax-header ///// -->



		<!-- gumax-content-body -->
		<div id="gumax-column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading gumax-firstHeading" >Linking NWChem against Intel's MKL</h1>
	</tr>
</table>
<br />    <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td width="65%" align="left" nowrap="nowrap"></td>                                         
            <td width="35%" class='ThreadOtions' nowrap></td>    
        </tr>
    </table>       <a name="post_2569"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2569" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem1" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2569.html">7:39:34 PM PST - Wed, Jan 2nd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">i could be wrong on this but it seems that NWChem is not using the MKL it was linked against. I say this for two reasons.<br />
<br />
1) The CPU time of all the test jobs  seem for the NWChem built with the standard libraries and  the one built with MKL are identical (+- 2%)<br />
<br />
2) I have noticed that in the final linking step to generate NWChem binary "-lblas and -llapack" are there, which i suspect are the default libraries for NWChem<br />
<br />
gfortran   -L/home/joe/nwchem-6.1.1-src/lib/LINUX64 -L/home/joe/nwchem-6.1.1-src/src/tools/install/lib  -o /home/joe/nwchem-6.1.1-src/bin/LINUX64/nwchem nwchem.o stubs.o -lnwctask -lccsd -lmcscf -lselci -lmp2 -lmoints -lstepper -ldriver -loptim -lnwdft -lgradients -lcphf -lesp -lddscf -ldangchang -lguess -lhessian -lvib -lnwcutil -lrimp2 -lproperty -lnwints -lprepar -lnwmd -lnwpw -lofpw -lpaw -lpspw -lband -lnwpwlib -lcafe -lspace -lanalyze -lqhop -lpfft -ldplot -ldrdy -lvscf -lqmmm -lqmd -letrans -lpspw -ltce -lbq -lcons -lperfm -ldntmc -lccca -lnwcutil -lga -lpeigs -lperfm -lcons -lbq -lnwcutil -L/home/joe/mkl/mkl/lib/intel64 -lmkl_scalapack_ilp64 -lmkl_cdft_core -lmkl_gf_ilp64 -lmkl_sequential -lmkl_core -lmkl_blacs_intelmpi_ilp64 -ldl -lpthread -lm  <font color='red'>-llapack  -lblas</font>   -L/home/joe/mpich-install/lib -lmpich -lopa -lmpl -lrt -lpthread<br />
<br />
The following is the script I use for environment variables<br />
<br />

<pre>#!/bin/bash
export NWCHEM_TOP=$HOME/nwchem-6.1.1-src
export NWCHEM_TARGET=LINUX64
export USE_MPI=y
export USE_MPIF=y
export USE_MPIF4=y
export MPI_LOC=$HOME/mpich-install
export LIBMPI=&quot;-lmpich -lopa -lmpl -lrt -lpthread&quot;
export MPI_LIB=$MPI_LOC/lib
export MPI_INCLUDE=$MPI_LOC/include
export LARGE_FILES=TRUE
export NWCHEM_MODULES=all
export MKLROOT=$HOME/mkl/mkl/lib/intel64
export BLASOPT=&quot;-L$MKLROOT -lmkl_scalapack_ilp64 -lmkl_cdft_core -lmkl_gf_ilp64 -lmkl_sequential -lmkl_core -lmkl_blacs_intelmpi_ilp64 -ldl -lpthread -lm&quot;
#make clean
make FC=gfortran FFLAGS=&quot;-fdefault-integer-8 -m64&quot;  nwchem_config
make FC=gfortran FFLAGS=&quot;-fdefault-integer-8 -m64&quot;  HAS_BLAS=yes
</pre> <br />
<br />
Any ideas? Thanks in advance
</td>
		                    </tr>
		                                
		                    <tr>
	<td class="edited_on" align="left" colspan="2">
	</td>
</tr>
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2571"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2571" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem2" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Regular</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2571.html">11:15:09 AM PST - Thu, Jan 3rd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Hi DouDou,<br />
<br />
I think that actually MKL is probably being used. However, you might not be able to see that easily for two reasons:<br />
1. In the usual test jobs the BLAS calls take very little time. So using a much more efficient BLAS library will still not change the CPU time much, probably too little to see.<br />
2. The presence of -llapack and -lblas is correct. Those libraries are included as MKL does not necessarily provide all LAPACK and BLAS routines. The routine that are not found in MKL are then picked up from the LAPACK and BLAS implementations in the source code. For this to work properly the LAPACK and BLAS libraries have to be listed after the MKL libraries, which you can easily see is correct on your link line. <br />
<br />
My recommendation is to use a tool like ldd on the binary and check that the binary was actually linked against the libraries you want. Alternatively you try and use the debugger on the binary and have it stop the program in for example dgemm (a BLAS routine) and see what the debugger says about where that routine comes from. Alternatively (but more work) you can put some print statements in the source code of the BLAS routines in NWChem. If the MKL versions are used you should not see anything from those print statements.<br />
<br />
I am sorry that it is not so easy to see what libraries the code uses, but if you really want to know there are ways to find out but it takes a little work.<br />
<br />
Best wishes,<br />
<br />
Huub
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2572"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2572" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem3" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2572.html">11:52:19 AM PST - Thu, Jan 3rd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">How to check if mkl was linked<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Doudou,<br />
Here is the command for checking if your binary contains any mkl blas. If the command doesnot return anything,<br />
the you do not have mkl blas objects in your nwchem binary.<br />
<br />
nm $HOME/nwchem-6.1.1-src/bin/LINUX64/nwchem | egrep mkl_ | egrep dgemm
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2573"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2573" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem4" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2573.html">2:31:37 PM PST - Thu, Jan 3rd 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Thanks Huub and Edopra for your responses,<br />
<br />
'nm $HOME/nwchem-6.1.1-src/bin/LINUX64/nwchem | egrep mkl_ | egrep dgemm' did not return, does that mean there are no MKL objects my NWChem binary? that is weird because in the link line the libraries are there. <br />
I don't really have to use MKL, I can use another set of optimized math libraries, which ones are the most popular/best tested for NWChem? Thanks again
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2575"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2575" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem5" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2575.html">10:20:41 AM PST - Fri, Jan 4th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">What about the ldd command, i.e.<br />
<br />
ldd  $HOME/nwchem-6.1.1-src/bin/LINUX64/nwchem<br />
<br />
Does this show any mkl library?<br />
<br />
<div class='quote_title'>Quote:DouDou <a target='blank' href="../../sp/id2573.html" title="Special:AWCforum/sp/id2573">Jan 3rd 1:31 pm</a><div class='quote'>Thanks Huub and Edopra for your responses,<br />
<br />
'nm $HOME/nwchem-6.1.1-src/bin/LINUX64/nwchem | egrep mkl_ | egrep dgemm' did not return, does that mean there are no MKL objects my NWChem binary? that is weird because in the link line the libraries are there. <br />
I don't really have to use MKL, I can use another set of optimized math libraries, which ones are the most popular/best tested for NWChem? Thanks again</div id="quote"></div id="quote">
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2576"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2576" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem6" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2576.html">10:42:47 AM PST - Fri, Jan 4th 2013 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2"><div class='quote_title'>Quote:Edoapra <a target='blank' href="../../sp/id2575.html" title="Special:AWCforum/sp/id2575">Jan 4th 9:20 am</a><div class='quote'>What about the ldd command, i.e.<br />
<br />
ldd  $HOME/nwchem-6.1.1-src/bin/LINUX64/nwchem<br />
<br />
Does this show any mkl library?<br />
<br />
<div class='quote_title'>Quote:DouDou <a target='blank' href="../../sp/id2573.html" title="Special:AWCforum/sp/id2573">Jan 3rd 1:31 pm</a><div class='quote'>Thanks Huub and Edopra for your responses,<br />
<br />
'nm $HOME/nwchem-6.1.1-src/bin/LINUX64/nwchem | egrep mkl_ | egrep dgemm' did not return, does that mean there are no MKL objects my NWChem binary? that is weird because in the link line the libraries are there. <br />
I don't really have to use MKL, I can use another set of optimized math libraries, which ones are the most popular/best tested for NWChem? Thanks again</div id="quote"></div id="quote"></div id="quote"></div id="quote"><br />
<br />
Yes, they are there <br />
<br />

<pre>
        libmkl_scalapack_ilp64.so =&gt; /home/joe/mkl/mkl/lib/intel64/libmkl_scalapack_ilp64.so (0x00002aaaaaaad000)
        libmkl_cdft_core.so =&gt; /home/joe/mkl/mkl/lib/intel64/libmkl_cdft_core.so (0x00002aaaab2b5000)
        libmkl_gf_ilp64.so =&gt; /home/joe/mkl/mkl/lib/intel64/libmkl_gf_ilp64.so (0x00002aaaab4d1000)
        libmkl_sequential.so =&gt; /home/joe/mkl/mkl/lib/intel64/libmkl_sequential.so (0x00002aaaabbd3000)
        libmkl_core.so =&gt; /home/joe/mkl/mkl/lib/intel64/libmkl_core.so (0x00002aaaac271000)
        libmkl_blacs_intelmpi_ilp64.so =&gt; /home/joe/mkl/mkl/lib/intel64/libmkl_blacs_intelmpi_ilp64.so (0x00002aaaad47f000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x0000003790800000)
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x0000003790c00000)
        libgfortran.so.1 =&gt; /usr/lib64/libgfortran.so.1 (0x00002aaaad708000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x0000003790400000)
        librt.so.1 =&gt; /lib64/librt.so.1 (0x0000003791400000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x0000003669600000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x0000003790000000)
        /lib64/ld-linux-x86-64.so.2 (0x000000378f000000)
</pre>
</td>
		                    </tr>
		                                
		                    <tr>
	<td class="edited_on" align="left" colspan="2">
	</td>
</tr>
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_5488"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_5488" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem7" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Gets Around</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id5488.html">9:11:08 AM PST - Wed, Dec 10th 2014 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2"><div class='quote_title'>Quote:DouDou <a target='blank' href="../../sp/id2569.html" title="Special:AWCforum/sp/id2569">Jan 3rd 2:39 am</a><div class='quote'><br />
<br />
-L/home/joe/mkl/mkl/lib/intel64 -lmkl_scalapack_ilp64 -lmkl_cdft_core -lmkl_gf_ilp64 -lmkl_sequential -lmkl_core -lmkl_blacs_intelmpi_ilp64 -ldl -lpthread -lm  <font color='red'>-llapack  -lblas</font>   -L/home/joe/mpich-install/lib -lmpich -lopa -lmpl -lrt -lpthread<br />
<br />
Any ideas? Thanks in advance</div id="quote"></div id="quote"><br />
<br />
You can read up on the left-to-right convention of the GNU linker (and possibly others) to understand why the presence of the built-in Netlib libraries are not used if the symbols are found in MKL first.<br />
<br />
Jeff
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0" class="bot_breadcrumbs_and_pagejump">
	<tr>
		<td width="100%" class="bot_breadcrumbs"><a href="../../index.html">Forum</a> &gt;&gt; <a href="../../sc/id2.html">NWChem's corner</a> &gt;&gt; <a href="../../sf/id4.html">Compiling NWChem</a></td>
	</tr>
	<tr>
		<td width="100%" class="bot_pagejumps"></td>
	</tr>
</table>
<br /><br />      <br />
</body> 
</html> 
