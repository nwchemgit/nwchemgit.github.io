<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.16.4" />
<meta name="keywords" content="memory problem in parallel running &quot;ARMCI DASSERT fail&quot; Viewed 11778 times, With a total of 9 Posts" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/gumax/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/gumax/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/gumax/IE70Fixes.css?270" media="screen" /><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?270"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>
var skin="gumax",
stylepath="/skins",
wgUrlProtocols="http.html\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/index.php/$1",
wgScriptPath="",
wgScriptExtension=".php",
wgVariantArticlePath=false,
wgActionPaths={},
wgCanonicalNamespace="Special",
wgCanonicalSpecialPageName="AWCforum",
wgNamespaceNumber=-1,
wgPageName="Special:AWCforum",
wgTitle="AWCforum",
wgAction="view",
wgArticleId=0,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=true,
wgCurRevisionId=0,
wgVersion="1.16.4",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "NWChem", "5": "NWChem talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "500": "Release-60", "501": "Release-60 talk", "502": "Release61", "503": "Release61 talk", "504": "Release62", "505": "Release62 talk", "506": "Release64", "507": "Release64 talk", "508": "Release65", "509": "Release65 talk", "510": "Development", "511": "Development talk", "512": "Release66", "513": "Release66 talk", "121707": "Forum"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "nwchem": 4, "nwchem_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "release-60": 500, "release-60_talk": 501, "release61": 502, "release61_talk": 503, "release62": 504, "release62_talk": 505, "release64": 506, "release64_talk": 507, "release65": 508, "release65_talk": 509, "development": 510, "development_talk": 511, "release66": 512, "release66_talk": 513, "forum": 121707, "ns_reldoc64": "NS_RELDOC65", "ns_reldoc64_talk": "NS_RELDOC65_TALK", "image": 6, "image_talk": 7},
wgSiteName="NWChem",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script>
		<!-- Head Scripts -->
<style type="text/css">
#bodyContent a[href ^="http://"] {
background: none;
    padding-right: 0px;
}

#bodyContent a.external {
background: none;
	padding-right: 0px;
}

#p-cactions li a {
text-transform: capitalize;
}

#contentSub {
margin: 0;
padding: 2px;
padding-bottom: 6px;
}

pre {
margin:0px; 
    padding:5px;
    padding-bottom:20px;  
    
    width: 600px;
    overflow:auto;
    overflow-y: visible;
    line-height: 100%;
}

.top_user_links {
margin: 0;
    padding: 0;
    border-bottom: 1px solid #aaa;
    text-align: right;
}

#TopMenuLinksHolder li a:hover {

}

#TopMenuLinksHolder li a {

}

#TopMenuLinksHolder li {
margin-top: 4px;   
    margin-left: 4px;
    margin-bottom: 0px;
    
    padding: 3px;
    
    list-style: none;
    float: right;
    display: block;
    
    width: auto;
    white-space: nowrap;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    color: #000;
    text-decoration: none;
    font: 11px Verdana;
    text-align: left;
    z-index: 3;
}

#TopMenuLinksHolder a:visited {

}

#TopMenuLinksHolder div a:hover {
background: #FFF;
    color: #000;
}

#TopMenuLinksHolder div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        width: auto;
        white-space: nowrap;
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#TopMenuLinksHolder div {
position: absolute;
    visibility: hidden;
    margin: 0;
    padding: 0;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
}

#TopMenuLinksHolder {
margin: 0;
    padding: 0;
    z-index: 3;
}

.UserNameOptions {

}

#UserNameOptions a:visited {

}

#UserNameOptions li a:hover {

}

#UserNameOptions li a {
font: 11px Verdana;
}

#UserNameOptions li {
list-style: none;
    display: block;
    white-space: nowrap;
    border: 0px;
    color: #000;
    text-align: left;
    text-decoration: none;
}

#UserNameOptions div a:hover {
color: #FFF;
}

#UserNameOptions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 5px;
        
        width: 500px;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#UserNameOptions div {
position: absolute;
    display: block;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    font: 12px arial;
    line-height: 100%;
}

#UserNameOptions {
margin: 0;
    padding: 0;
    z-index: 2;
}

.group_text {
font-size: 84%;
    width: auto;
    padding: 0px;
}

.edited_on {
border-top: 1px solid #aaa;
    margin: 0px;
    margin-bottom: 0px;
    padding-left: 5px;
    font-size: 12px;
}

.post_title {

}

.post_date {
border-bottom: 1px solid #aaa;
    font-size: 90%;
    padding-left: 2px;
}

.post_td {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    margin: .0em;
    padding: .0em;
}

.post_body {
padding: .5em;
    padding-top: 0px;
}

.post0 {
background-color: #E5E5E5;
    border-left: 1px solid #aaa;
    padding: .0em;
}

.post1 {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding-bottom: .0em;
}

.post_footer {
/* post, quote, edit buttons */
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.post_box {
margin-top: 5px;
    margin-left: 5px;
    margin-right: 2px;
    width: auto;
}

.mem_name {
border-bottom: 1px solid #aaa;
    margin: 0;
    padding: .4em;
}

.adv {
border: 0px;
    margin: 0em;
    padding: 0em;
}

.thread_sig {
border-top: 2px solid #aaa;
    margin: 3px;
    padding-left: 5px;
}

#subscribe_menu {
position: absolute;
    background: #ccc ;
    border: 1px solid #aaa;
    border-top: 0px;
    margin: 0em;
    padding: 5px;
    padding-top: 0px;
    top:auto;
    right:65px;
    z-index: 2;
}

.drop_down_buttons:hover {
background: #ccc ;
}

.drop_down_buttons {
margin: 0em;
    white-space: nowrap;
    border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 5px;
    color: #000;
    text-align: center;
    background: #fff ;
}

.mod_menu_row {
text-align: left;
}

.post_buttons:hover {
background: #fff ;
}

.post_buttons {
white-space: nowrap;
    float: right;
    margin-top: .5em;
    margin-right: 5px;
    border: 1px solid #aaa;
    border-bottom: 0em;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 0px;
    color: #000;
}

.quote_title {
border: 1px dashed #aaa;
	padding: 5px;
	background-color: #f9f9f9;
	font-family:"Courier New", Courier, mono;
}

.quote {
border-top: 1px solid #000;
	background-color: #fff;
	padding: 10px;
	font-size: 95%;
}

.user_options_row {
border: 1px solid #aaa;
    background: #fff ;
    padding: .3em;
}

.t_userinfo {
white-space:nowrap;
    text-align: left;
    margin: 0;
    padding: .7em;
    padding-bottom: 0em;
}

.ThreadOtions {
margin: 0;
    padding: 0;
    text-align: right;
}

#ThreadOtions a:visited {

}

#ThreadOtions li a:hover {

}

#ThreadOtions li a {
border: 1px solid #aaa;
    border-bottom: 0em;
    padding: 4px;
}

#ThreadOtions li {
list-style: none;
    display: block;
    white-space: nowrap;
    
    border: 0px;
    color: #000;
    
    text-decoration: none;
    z-index: 3;
}

#ThreadOtions div a:hover {
background: #FFF;
    color: #000;
}

#ThreadOtions div a {
position: relative;
        display: block;
        margin: 0;
        padding: 2px;
        border: 0em;
        
        white-space: nowrap; 
        text-align: left;
        text-decoration: none;
        font: 11px arial;
}

#ThreadOtions div {
position: absolute; 
    right: 50px;
    visibility: hidden;
    margin: 0;
    padding: 5px;
    background: #DDDDDD;
    border: 1px solid #AAAAAA;
    white-space: nowrap; 
    text-align: left;
}

#ThreadOtions {
margin-top: 3px;
    padding: 0;
    z-index: 3;
}

.forum_posts {
border: 1px solid #aaa;
    margin: 0em;
    padding: 0em;
    width: 100%;

 width: 100%;
}

.post {
background-color: #f9f9f9;
    border-left: 1px solid #aaa;
    padding: .0em;
}

#search_box {
white-space:nowrap;
    text-align: right; 
    margin: .0em;
    padding: 0px;
}

.search_box {
float: right;
    font-size: 97%;
    margin: .0em;
    color: #000;
    background: #fff;
    border: 1px solid #000;
    margin-left: 5px;
    padding: 0px;
}

.highlightsearchword {
color: #FF0000;
}

.poll_display_table {
border: 1px solid #aaa;
    
    padding: 1px;
}

.poll_displayheader {
border-bottom: 1px dashed #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_row {
border-bottom: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 2px;
}

.poll_display_vote_total {
border-top: 1px solid #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
}

.poll_display_vote_numbers_header {
border: 1px solid #aaa;
border-bottom: 0;
}

.poll_display_vote_percent_header {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option_header {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_numbers {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_display_vote_percent {
border-top: 1px solid #aaa;
    padding: 1px;
}

.poll_display_vote_option {
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
}

.poll_percent_color_op10 {
background-color: #7FFF00;
}

.poll_percent_color_op1 {
background-color: #CD5555;
}

.poll_percent_color_op2 {
background-color: #5CACEE;
}

.poll_percent_color_op3 {
background-color: #FFCC11;
}

.poll_percent_color_op4 {
background-color: #668014;
}

.poll_percent_color_op5 {
background-color: #A0522D;
}

.poll_percent_color_op6 {
background-color: #9F79EE;
}

.poll_percent_color_op7 {
background-color: #EE00EE;
}

.poll_percent_color_op8 {
background-color: #DC143C;
}

.poll_percent_color_op9 {
background-color: #551011;
}

.page_jumps_top:hover {
background: #ccc ;
}

.page_jumps_top {
white-space: nowrap;
    display: inline;
    
    margin: 0px; 
    margin-right: 2px;
    
    border: 1px solid #aaa;
    border-bottom: 0px;
    
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 4px;
    
    color: #000;
}

.page_jumps_bot:hover {
background: #ccc ;
}

.page_jumps_bot {
border: 1px solid #aaa;
    border-top: 0px;
    padding-top: 2px;
    margin-left: 2px;
    font-size: 100%;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 2px;
}

.main_memtable {
border: 1px solid #aaa;
}

.main_leftmenu {
border-right: 1px solid #aaa;
     background-color: #f9f9f9;
     width: 175px;
}

.leftmenuheaders {
border: 1px dashed #aaa;
    padding: 2px;
    font-family:"Courier New", Courier, mono;
}

.leftmenu {
background-color: #f9f9f9;
}

.right_body {
padding: 2px;
}

.mem_pm_table {
border: 1px solid #aaa;
    padding: 2px;
    margin: 7px;
}

.pm_header_new {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_title {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:85%;
}

.pm_header_sender {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_header_date {
background-color: #aaa;
    border: 1px solid #000;
    padding: 2px;
    width:5%;
}

.pm_row {
background-color: #f9f9f9;
    border: 1px solid #000;
    padding: 3px;
}

#cat_list_lastaction_user {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 100%;
}

#cat_list_lastaction_date {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#cat_list_lastaction_title {
font-size: 90%;
    color: #7d7d7d;
    text-align: right;
    margin-right: 10px;
    line-height: 105%;
}

#small_desc {
font-size: 84%;
    color: #7d7d7d;
	margin-left: 10px;
    width: auto;
}

#cat_forumdisc {
font-size: 84%;
    color: #7d7d7d;
    margin-left: 10px;
    width: auto;
}

.cat_forumrows {
border: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 5px;
    font-size: 95%;
}

.thread_col_head {
border: 1px solid #aaa;
    margin: 0px;
    padding: 5px;
    white-space: nowrap;
}

.bread_crumbs {
border-bottom: 1px solid #aaa;
    border-top: 0px;
    padding: 2px;
    text-align: left;
}

.dl_maintable_head {
border-right: 1px solid #aaa;
    border-bottom: 1px solid #aaa;
    background-color: #fff;
    padding: 2px;
}

.dl_maintable {
border: 1px solid #aaa;
    margin: 1px;
    padding: 1px;
}

.right_float {
float: right;
	margin-top: 8px;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.right {
float: right;
	padding-left: 5px;
	padding-right: 5px;
	margin-right: 10px;
	margin-left: 10px;
}

.spacer {
background-color: #aaa;
}

.whos_here_header {
border-bottom: 1px dashed #aaa;
            padding: 4px;
            font-family:"Courier New", Courier, mono;
}

.whos_here_row {
border-bottom: 1px solid #aaa;
            background-color: #f9f9f9;
            padding: 2px;
}

.whos_here {
border: 1px solid #aaa;
            border-bottom: 0;
}

.nothing {
font-size: 0%;
            margin: .0em;
            border: 0;
            margin: 0;
            padding: 0;
            width: 0;
}

.forum_stats {
border: 1px solid #aaa;
            border-bottom: 0;
}

.forum_stats_leftcol {
border-bottom: 1px solid #aaa;
                background-color: #f9f9f9;
                padding: 2px;
}

.forum_stats_rightcol {
background-color: #f9f9f9;
                border-bottom: 1px solid #aaa;
                padding: 2px;
}

.forum_stats_header {
border-bottom: 1px dashed #aaa;
                padding: 4px;
                font-family:"Courier New", Courier, mono;
}

.thread_rows0 {
background-color: #E5E5E5;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows1 {
background-color: #f3f3f3;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

.thread_rows {
background-color: #f9f9f9;
    border: 1px solid #aaa;
    border-top: 0px ;
    padding: 2px;
    font-size: 95%;
}

#annc {
border: 1px solid #000;
	background-color: red;
	padding: 0px;
}

.sticky {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #ffa; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

.thread_lastaction {
font-size: 84%;
    text-align: right;
    white-space: nowrap;
    display: inline;
}

.pagejumps_PostOnForumPage:hover {
background: #ccc ;
}

.pagejumps_PostOnForumPage {
border: 1px solid #aaa;
    margin-left: 3px;
    font-size: 100%;
    padding-left: 3px;
    padding-right: 3px;
    padding-bottom: 0px;
}

.new_thread_button:hover {
background: #ccc ;
}

.new_thread_button {
white-space: nowrap;
    float: right;
    display: inline; /*fixes IE float bug*/
    margin-top: 0px; 
    margin-bottom: 0px; 
    margin-left: 10px;
   /* margin-left: -4px; */
    border: 1px solid #aaa;
    border-bottom: 0px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 3px;
    text-align: left; /* 2.4.1 */
    color: #000;
}

#row_info td {
border: 1px solid #aaa;
	border-top: 0px;
	background-color: #f9f9f9;
	padding: 5px;
	font-size: 95%;
}

.page_jumps_holder_thread_bot {
border-bottom: 1px solid #aaa;
}

.page_jumps_holderBot {

}

.poll_thread_listing {
border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #FFCC00;
    padding: 2px;
    font-size: 95%;
}

.locked_thread {
font-style: italic;
    border: 1px solid #aaa;
    border-top: 0px;
    background-color:  #e2ffe2; /* #ffa; e2ffe2 */
    padding: 2px;
    font-size: 95%;
}

#ajax_pmname {
text-align: left;
}

#ajax_pmname ul {
list-style: none;
margin: 0;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li:hover {
background: #f9f9f9;
	margin-left: .1em;
	text-decoration: underline;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

#ajax_pmname li {
padding: 2px 5px;
	white-space: nowrap;
	text-align: left;
}

</style>


		<!-- gumax customized style -->

					<style type="text/css">
				#gumax-content-actions li#ca-talk,
				#gumax-content-actions li#ca-history,
				#gumax-content-actions li#ca-edit,
				#gumax-personal-tools
				{ display: none; }
			</style>
		
		<!--[if lt IE 7]>
			<script type="text/javascript" src="/skins/gumax/js/ieunitpngfix-tag.js"></script>
		<![endif]-->

		<!-- end of gumax customized style -->
</head>


<body class="mediawiki ltr ns--1 ns-special page-Special_AWCforum_st_id633 skin-gumax">

	</div>
	<!-- ///// end of gumax-header ///// -->



		<!-- gumax-content-body -->
		<div id="gumax-column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading gumax-firstHeading" >memory problem in parallel running "ARMCI DASSERT fail"</h1>
	</tr>
</table>
<br />    <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td width="65%" align="left" nowrap="nowrap"></td>                                         
            <td width="35%" class='ThreadOtions' nowrap></td>    
        </tr>
    </table>       <a name="post_2273"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2273" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem1" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2273.html">11:48:27 PM PDT - Thu, Nov 1st 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">I did series of Coupled Cluster testing calculations of FH2 using two nodes connected with infiniband, with 12 cores and 48GB memory per node.<br />
For rather small basis and tasks, such as UCCSDT/avdz and UCCSD/vtz, everything is OK, but for tasks requiring more than 500MB memory occurs the problem.<br />
<br />
The input file is&nbsp;:<br />
<br />

<pre>
start fh2

scratch_dir ./tmp

memory heap 300 mb stack 300 mb global 3000 mb

geometry units au
    H       -0.466571969    0.000000000   -3.498280516
    H        0.624505061    0.000000000   -2.532671944
    F       -0.008378972    0.000000000    0.319965748
end

basis noprint
 * library cc-pvdz # or aug-cc-pvdz or others
end

SCF
  semidirect
  DOUBLET
  UHF
  THRESH 1.0e-10
  TOL2E  1.0e-10
END

TCE
  SCF
  CCSD # or CCSDT or CCSDTQ
END

TASK TCE ENERGY
</pre><br />
<br />
When I do UCCSD/avtz calculations, the Hartree Fock part is OK, but terminated at CC as below:<br />

<pre>
            Memory Information  
            ------------------   
          Available GA space size is    9437161950 doubles
          Available MA space size is      78639421 doubles

 Maximum block size        36 doubles

 tile_dim =     35

 Block   Spin    Irrep     Size     Offset   Alpha
 -------------------------------------------------
   1    alpha     a'     5 doubles       0       1
   2    alpha     a&quot;     1 doubles       5       2
   3    beta      a'     4 doubles       6       3
   4    beta      a&quot;     1 doubles      10       4
   5    alpha     a'    34 doubles      11       5
   6    alpha     a'    34 doubles      45       6
   7    alpha     a&quot;    31 doubles      79       7
   8    beta      a'    34 doubles     110       8
   9    beta      a'    35 doubles     144       9
  10    beta      a&quot;    31 doubles     179      10
   
 Global array virtual files algorithm will be used

 Parallel file system coherency ......... OK

 Integral file          = ./tmp/fh2.aoints.00
 Record size in doubles =  65536        No. of integs per rec  =  43688
 Max. records in memory =     15        Max. records in file   =   2287
 No. of bits per label  =      8        No. of bits per value  =     64

   
 #quartets = 1.396D+05 #integrals = 8.008D+06 #direct =  0.0% #cached =100.0%


File balance: exchanges=    12  moved=    15  time=   0.0
 
 
 Fock matrix recomputed
 1-e file size   =            12706
 1-e file name   = ./tmp/fh2.f1    
 Cpu &amp; wall time / sec            0.2            1.1

 tce_ao2e: fast2e=1
 half-transformed integrals in memory

 2-e (intermediate) file size =       279803475
 2-e (intermediate) file name = ./tmp/fh2.v2i
 Cpu &amp; wall time / sec            1.8            2.3

 tce_mo2e: fast2e=1
 2-e integrals stored in memory

 2-e file size   =        119972997
 2-e file name   = ./tmp/fh2.v2
 Cpu &amp; wall time / sec           10.0           10.5
 do_pt =  F
 do_lam_pt =  F
 do_cr_pt =  F
 do_lcr_pt =  F
 do_2t_pt =  F
 T1-number-of-tasks                     6

 t1 file size   =              678
 t1 file name   = ./tmp/fh2.t1
 t1 file handle =       -998
 T2-number-of-boxes                    38

 t2 file size   =           368230
 t2 file name   = ./tmp/fh2.t2
 t2 file handle =       -995

 CCSD iterations
 -----------------------------------------------------------------
 Iter          Residuum       Correlation     Cpu    Wall    V2*C2
 -----------------------------------------------------------------
0: error ival=4
(rank:0 hostname:compute-10-15.local pid:19142):ARMCI DASSERT fail. ../../ga-5-1/armci/src/devices/openib/openib.c:armci_call_data_server():2193 cond:(pdscr-&gt;status==IBV_WC_SUCCESS)
12: error ival=4
(rank:12 hostname:compute-10-1.local pid:9867):ARMCI DASSERT fail. ../../ga-5-1/armci/src/devices/openib/openib.c:armci_call_data_server():2193 cond:(pdscr-&gt;status==IBV_WC_SUCCESS)
rank 0 in job 8  i10-15_52820   caused collective abort of all ranks
  exit status of rank 0: killed by signal 9
</pre><br />
<br />
For UCCSDTQ/vdz calculations, it terminated at the third iteration of CC:<br />

<pre>
 2-e file size   =           386290
 2-e file name   = ./tmp/fh2.v2
 Cpu &amp; wall time / sec            0.4            0.4
 do_pt =  F
 do_lam_pt =  F   
 do_cr_pt =  F    
 do_lcr_pt =  F   
 do_2t_pt =  F    
 T1-number-of-tasks                     6
   
 t1 file size   =              140      
 t1 file name   = ./tmp/fh2.t1          
 t1 file handle =       -998
 T2-number-of-boxes                    38

 t2 file size   =            14660
 t2 file name   = ./tmp/fh2.t2
 t2 file handle =       -995

 t3 file size   =          1160539
 t3 file name   = ./tmp/fh2.t3
2: WARNING:armci_set_mem_offset: offset changed 794624 to 9244672
3: WARNING:armci_set_mem_offset: offset changed 0 to 8450048
6: WARNING:armci_set_mem_offset: offset changed 794624 to 8450048 
8: WARNING:armci_set_mem_offset: offset changed 794624 to 8450048  
13: WARNING:armci_set_mem_offset: offset changed 0 to -620834816     

 t4 file size   =         78188214
 t4 file name   = ./tmp/fh2.t4             

 CCSDTQ iterations
 --------------------------------------------------------
 Iter          Residuum       Correlation     Cpu    Wall
 --------------------------------------------------------
    1   0.2682660632262  -0.1813353786615    86.8    89.1
    2   0.0920127385001  -0.1943555090903    87.5    89.9
0: error ival=4
(rank:0 hostname:compute-10-15.local pid:19656):ARMCI DASSERT fail. ../../ga-5-1/armci/src/devices/openib/openib.c:armci_call_data_server():2193 cond:(pdscr-&gt;status==IBV_WC_SUCCESS)
12: error ival=4
(rank:12 hostname:compute-10-1.local pid:10202):ARMCI DASSERT fail. ../../ga-5-1/armci/src/devices/openib/openib.c:armci_call_data_server():2193 cond:(pdscr-&gt;status==IBV_WC_SUCCESS)
application called MPI_Abort(comm=0x84000003, 1) - process 0
rank 0 in job 13  i10-15_52820   caused collective abort of all ranks
  exit status of rank 0: killed by signal 9
</pre><br />
<br />
If only one node was used everything is also OK. It seems that the actually available memory becomes limited if parallel with multiple nodes.<br />
I also checked the maximum shared memory, which is nearly 36GB:<br />

<pre>
cat /proc/sys/kernel/shmmax
37976435712
</pre><br />
<br />
The compiling setenvs are:<br />

<pre>
setenv LARGE_FILES TRUE
setenv LIB_DEFINES &quot;-DDFLT_TOT_MEM=16777216&quot;
setenv NWCHEM_TOP /work2/nwchem-6.1.1
setenv NWCHEM_TARGET LINUX64
setenv ENABLE_COMPONENT yes
setenv TCGRSH /usr/bin/ssh
setenv USE_MPI &quot;y&quot;
setenv USE_MPIF &quot;y&quot;
setenv USE_MPIF4 &quot;y&quot;
setenv MPI_LOC /work2/intel/impi/4.1.0.024/intel64
setenv MPI_LIB ${MPI_LOC}/lib
setenv MPI_INCLUDE ${MPI_LOC}/include
setenv LIBMPI &quot;-lmpigf -lmpigi -lmpi_ilp64 -lmpi&quot;
setenv IB_HOME /usr
setenv IB_INCLUDE $IB_HOME/include
setenv IB_LIB $IB_HOME/lib64
setenv IB_LIB_NAME &quot;-libverbs -libumad -lpthread -lrt&quot;
setenv ARMCI_NETWORK OPENIB
setenv PYTHONHOME /usr
setenv PYTHONVERSION 2.4
setenv USE_PYTHON64 &quot;y&quot;
setenv CCSDTQ yes
setenv CCSDTLR yes
setenv NWCHEM_MODULES &quot;all python&quot;
setenv MKLROOT /work1/soft/intel/mkl/10.1.2.024
setenv BLASOPT &quot;-L${MKLROOT}/lib/em64t -lmkl_intel_ilp64 -lmkl_sequential -lmkl_core -lpthread -lm&quot;
setenv FC &quot;ifort -i8 -I${MKLROOT}/include&quot;
setenv CC &quot;icc -DMKL_ILP64 -I${MKLROOT}/include&quot;
setenv MSG_COMMS MPI
</pre><br />
<br />
<br />
How can I deal with this error? Did anyone get the similar problem?<br />
Any suggestions are welcome.
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2275"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2275" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem2" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2275.html">11:17:32 AM PDT - Fri, Nov 2nd 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Psd,<br />
Your calculations are likely to be crashing while creating shared memory segments.<br />
If you set the environmental variable ARMCI_DEFAULT_SHMMAX to a value of 2048 (or larger),<br />
you should be able to overcome this problem.<br />
Please keep in mind that<br />
ARMCI_DEFAULT_SHMMAX has to be greater or equal than the kernel parameter kernel.shmmax<br />
(Root can only change kernel.shmmax, therefore you might have to ask the system<br />
administrator to do it).<br />
For example, if the value of kernel.shmmax is 4294967296 as in the example below,<br />
ARMCI_DEFAULT_SHMMAX can be at most 4096 (4294967296=4096*1024*1024)<br />
<br />
$ sysctl kernel.shmmax<br />
kernel.shmmax = 4294967296<br />
<br />
Cheers, Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2276"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2276" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem3" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2276.html">7:20:33 AM PDT - Sat, Nov 3rd 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Edo,<br />
<br />
Thanks for your advise, but this still does not work actually.<br />
<br />
When I setenv ARMCI_DEFAULT_SHMMAX 36000, comes this warning:<br />

<pre>
incorrect ARMCI_DEFAULT_SHMMAX should be &lt;1,8192&gt;mb and 2^N Found=36000
</pre> <br />
and the output error is:<br />

<pre>
 2-e (intermediate) file size =       279803475
 2-e (intermediate) file name = ./tmp/fh2.v2i
14: WARNING:armci_set_mem_offset: offset changed 0 to 12124160
13: WARNING:armci_set_mem_offset: offset changed 0 to 12124160
18: WARNING:armci_set_mem_offset: offset changed 0 to 12124160
1: WARNING:armci_set_mem_offset: offset changed 0 to 12128256
2: WARNING:armci_set_mem_offset: offset changed 0 to 12124160
6: WARNING:armci_set_mem_offset: offset changed 0 to 12124160
25: WARNING:armci_set_mem_offset: offset changed 0 to 11993088
31: WARNING:armci_set_mem_offset: offset changed 67596288 to 79589376
(rank:24 hostname:compute-11-3.local pid:8753):ARMCI DASSERT fail. ../../ga-5-1/armci/sr
c/devices/openib/openib.c:armci_server_register_region():1124 cond:(memhdl-&gt;memhndl!=((v
oid *)0))
Last System Error Message from Task 24:: Cannot allocate memory
(rank:12 hostname:compute-11-4.local pid:4225):ARMCI DASSERT fail. ../../ga-5-1/armci/sr
c/devices/openib/openib.c:armci_server_register_region():1124 cond:(memhdl-&gt;memhndl!=((v
oid *)0))
Last System Error Message from Task 12:: Cannot allocate memory
(rank:0 hostname:compute-11-32.local pid:22892):ARMCI DASSERT fail. ../../ga-5-1/armci/s
rc/devices/openib/openib.c:armci_server_register_region():1124 cond:(memhdl-&gt;memhndl!=((
void *)0))
Last System Error Message from Task 0:: Cannot allocate memory
application called MPI_Abort(comm=0x84000003, 1) - process 24
application called MPI_Abort(comm=0x84000003, 1) - process 12
application called MPI_Abort(comm=0x84000003, 1) - process 0
rank 24 in job 11  i11-32_41520   caused collective abort of all ranks
  exit status of rank 24: killed by signal 9 

</pre> <br />
<br />
But if I setenv ARMCI_DEFAULT_SHMMAX &lt;= 8192, it do not run!<br />
<br />
As a result I still haven't find the bottleneck.<br />
<br />
<br />
<br />
<div class='quote_title'>Quote:Edoapra <a target='blank' href="../../sp/id2275.html" title="Special:AWCforum/sp/id2275">Nov 2nd 11:17 am</a><div class='quote'>Psd,<br />
Your calculations are likely to be crashing while creating shared memory segments.<br />
If you set the environmental variable ARMCI_DEFAULT_SHMMAX to a value of 2048 (or larger),<br />
you should be able to overcome this problem.<br />
Please keep in mind that<br />
ARMCI_DEFAULT_SHMMAX has to be greater or equal than the kernel parameter kernel.shmmax<br />
(Root can only change kernel.shmmax, therefore you might have to ask the system<br />
administrator to do it).<br />
For example, if the value of kernel.shmmax is 4294967296 as in the example below,<br />
ARMCI_DEFAULT_SHMMAX can be at most 4096 (4294967296=4096*1024*1024)<br />
<br />
$ sysctl kernel.shmmax<br />
kernel.shmmax = 4294967296<br />
<br />
Cheers, Edo</div id="quote"></div id="quote">
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2279"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2279" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem4" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2279.html">10:54:54 AM PST - Mon, Nov 5th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">What is the error when you set ARMCI_DEFAULT_SHMMAX=8192&nbsp;?<br />
Thanks, Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2291"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2291" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem5" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2291.html">5:48:45 PM PST - Mon, Nov 5th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2"><pre>
 argument  1 = fh2.nw
(rank:12 hostname:compute-11-3.local pid:1523):ARMCI DASSERT fail. ../../ga-5-1/armci/src/devices/openib/openib.c:armci_server_register_region():1124 cond:(memhdl-&gt;memhndl!=((void *)0))
Last System Error Message from Task 12:: Cannot allocate memory
application called MPI_Abort(comm=0x84000003, 1) - process 12
(rank:0 hostname:compute-11-32.local pid:4764):ARMCI DASSERT fail. ../../ga-5-1/armci/src/devices/openib/openib.c:armci_server_register_region():1124 cond:(memhdl-&gt;memhndl!=((void *)0))
Last System Error Message from Task 0:: Cannot allocate memory
rank 12 in job 2  i11-32_41208   caused collective abort of all ranks
  exit status of rank 12: killed by signal 9 
[5:i11-32] unexpected disconnect completion event from [12:i11-3]
Assertion failed in file ../../dapl_conn_rc.c at line 1128: 0
internal ABORT - process 5
</pre><br />
<br />
Thanks!<br />
<br />
<br />
<div class='quote_title'>Quote:Edoapra <a target='blank' href="../../sp/id2279.html" title="Special:AWCforum/sp/id2279">Nov 5th 9:54 am</a><div class='quote'>What is the error when you set ARMCI_DEFAULT_SHMMAX=8192&nbsp;?<br />
Thanks, Edo</div id="quote"></div id="quote">
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2293"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2293" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem6" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2293.html">10:47:17 AM PST - Tue, Nov 6th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">Physical Memory<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Psd,<br />
How much physical memory is available on each node and how many processors are you using on each node?<br />
<br />
Thanks, Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2301"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2301" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem7" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2301.html">7:18:13 PM PST - Tue, Nov 6th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Hi Edo<br />
<br />
There's 48G physical memory available on each node, and 12 processors are used on each node.<br />
<br />
It is really strange that, for a medium calculation that could run with only one node, fails using two or more nodes. I don't think this break down is caused by the lack of memory, maybe some tools such as ga are not well installed, or maybe some system services are not available. It seems that the host machine can only use up to 1GB remote memory, and the ga do not make the memory sum up.<br />
<br />
<br />
<div class='quote_title'>Quote:Edoapra <a target='blank' href="../../sp/id2293.html" title="Special:AWCforum/sp/id2293">Nov 6th 9:47 am</a><div class='quote'>Psd,<br />
How much physical memory is available on each node and how many processors are you using on each node?<br />
<br />
Thanks, Edo</div id="quote"></div id="quote">
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2306"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2306" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem8" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Forum Vet</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2306.html">3:40:19 PM PST - Wed, Nov 7th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">shared memory segments<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Psd,<br />
Did you check if there are shared memory segments still allocated on the nodes of your cluster?<br />
You can do it by running the command<br />
<br />
ipcs -a<br />
<br />
The scripts ipcreset can be used both to display and cleanup existing shared memory segments.<br />
You can find it in<br />
<br />
$NWCHEM_TOP/src/tools/ga-5-1/global/testing/ipcreset<br />
<br />
Cheers, Edo
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2368"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2368" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem9" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post0" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2368.html">12:21:14 AM PST - Thu, Nov 15th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                    <tr><td valign="top" height="1px" colspan="2">Parallel efficiency of CC tasks<hr /></td></tr>                 
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Hi Edoapra!<br />
<br />
Thanks for your help. We have found the bottleneck and fixed it, and it works well now. This is caused by the default amount of memory infiniband can register, in default it is limited to 4G.<br />
<br />
Besides, I performed some CC calculations, and I found that it is unsatisfactory about the paralleling efficiency. For the task as below, if I use <font color='red'>16 cores with 1 nodes</font>, each iteration takes 759.6s of CPU time, but when I use <font color='red'>128 cores with 8 nodes</font>, it increases to 1326s to complete one iteration. Is this normal?<br />
<br />
Thanks!<br />
<br />
Jun Chen<br />
2012/11/15<br />
<br />
the input file is:<br />

<pre>
start fh2

permanent_dir .
scratch_dir ./tmp

memory heap 500 mb stack 500 mb global 9000 mb

geometry units au
    H       -0.466571969    0.000000000   -3.498280516
    H        0.624505061    0.000000000   -2.532671944
    F       -0.008378972    0.000000000    0.319965748
#   symmetry c1
end

basis noprint
 * library aug-cc-pvqz
end

SCF
  semidirect
  DOUBLET
  RHF
  THRESH 1.0d-8
  TOL2E  1.0d-8
END

TCE
  SCF
  CCSDT
  THRESH 1.0d-5
  FREEZE atomic
  DIIS 5
END

TASK TCE ENERGY

</pre><br />
<br />
<br />
<br />
<div class='quote_title'>Quote:Edoapra <a target='blank' href="../../sp/id2306.html" title="Special:AWCforum/sp/id2306">Nov 7th 2:40 pm</a><div class='quote'>Psd,<br />
Did you check if there are shared memory segments still allocated on the nodes of your cluster?<br />
You can do it by running the command<br />
<br />
ipcs -a<br />
<br />
The scripts ipcreset can be used both to display and cleanup existing shared memory segments.<br />
You can find it in<br />
<br />
$NWCHEM_TOP/src/tools/ga-5-1/global/testing/ipcreset<br />
<br />
Cheers, Edo</div id="quote"></div id="quote">
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br />       <a name="post_2390"></a>       
        <table class="forum_posts" cellpadding="0" cellspacing="0" id="fullheight">
            <tr>
                <td width="100%" align="left" colspan="2" valign="top" class="mem_name" id="name_2390" nowrap>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="UserNameOptions" width="100%">
                                <ul id="UserNameOptions">
                                  <li>
                                    <div id="mem10" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
                                        
                                    </div>
                                  </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="left" nowrap valign="top" width="20">
                    <table cellpadding="0" cellspacing="0" width="20">
                        <tr>
                            <td class="t_userinfo" width="20" nowrap>
                <!-- member_title --><div class="">Clicked A Few Times</div><!-- /member_title -->
                                
                            </td>
                        </tr>
                    </table>
                </td>
                        
            		<td align="left" width="100%" valign="top" id="fullheight">
		                <table width="100%" cellpadding="0" cellspacing="0" class="post1" height="75">
		                    <tr>
		                        <td class="post_date" valign="bottom" height="1px"  width="100%" colspan="2"  nowrap><a target="blank" href="../../sp/id2390.html">12:52:53 PM PST - Fri, Nov 16th 2012 </a></td>
		                            <td class="post_date" valign="bottom" height="1px" width="100%" nowrap></td>

		                    </tr>
		                                     
		                    <tr>
		                        <td valign="top" class="post_body" height="65" colspan="2">Hi, <br />
I am not surprised that your CCSDT/CCSDTQ jobs are not running (or perhaps not  scaling properly).<br />
Please look at your tilesizes you are using. For unoccupied orbitals the max. tilesize is 35 which poses a huge demand on the local memory requirement and additionally provide really poor granularity. <br />
<br />
For the CCSDT part the local memory demand is proportional to tilesize^6, so please set for the CCSDT the tilesize parameter equal to 15. <br />
<br />
For the CCSDTQ part the local memory demand is proportional to tilesize^8, so be even more conservative with the tilesize in these runs. I guess tilesize 8  shoule be fine. <br />
<br />
Please also modify the memory settigns. Something like this should work<br />
memory heap 100 mb stack 1200 mb global 2500 mb<br />
<br />
Best,<br />
Karol
</td>
		                    </tr>
		                                
		                    
		                    
		                </table>
		            </td>
        </tr> 
           
        <tr><td class="thread_sig" align="left" colspan="2"></td></tr>
        	
        </table>
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0" class="bot_breadcrumbs_and_pagejump">
	<tr>
		<td width="100%" class="bot_breadcrumbs"><a href="../../index.html">Forum</a> &gt;&gt; <a href="../../sc/id2.html">NWChem's corner</a> &gt;&gt; <a href="../../sf/id5.html">Running NWChem</a></td>
	</tr>
	<tr>
		<td width="100%" class="bot_pagejumps"></td>
	</tr>
</table>
<br /><br />      <br />
</body> 
</html> 
